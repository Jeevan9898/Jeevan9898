<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeevan Yadav | Space Narrative</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/FontLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/geometries/TextGeometry.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Outfit:wght@100;300;400;700;900&family=Share+Tech+Mono&display=swap');

        /* ============================================================
           CSS VARIABLES
        ============================================================ */
        :root {
            --cyan: #00f2ff;
            --cyan-dim: rgba(0, 242, 255, 0.15);
            --cyan-glow: rgba(0, 242, 255, 0.4);
            --orange: #ff4500;
            --gold: #ffd700;
            --bg: #000005;
            --surface: rgba(4, 10, 24, 0.95);
            --text-muted: #667799;
            --mono: 'Share Tech Mono', monospace;
            --display: 'Syncopate', sans-serif;
            --body: 'Outfit', sans-serif;
        }

        /* ============================================================
           RESET & BASE
        ============================================================ */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body, html {
            background: var(--bg); color: white;
            font-family: var(--body);
            overflow-x: hidden; cursor: none;
        }

        /* GRAIN OVERLAY */
        body::before {
            content: '';
            position: fixed; inset: 0; z-index: 9998; pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='1'/%3E%3C/svg%3E");
            opacity: 0.025;
            mix-blend-mode: overlay;
        }

        /* SCANLINES */
        body::after {
            content: '';
            position: fixed; inset: 0; z-index: 9997; pointer-events: none;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0, 242, 255, 0.01) 2px,
                rgba(0, 242, 255, 0.01) 4px
            );
        }

        #canvas-container {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100vh;
            z-index: 1; pointer-events: none;
        }

        /* ============================================================
           CUSTOM CURSOR
        ============================================================ */
        #cursor-hud {
            position: fixed; top: 0; left: 0;
            pointer-events: none; z-index: 9999;
            transform: translate(-50%, -50%);
        }
        .crosshair-outer {
            width: 44px; height: 44px;
            border: 1px solid rgba(0, 242, 255, 0.4);
            border-radius: 50%; position: relative;
            display: flex; justify-content: center; align-items: center;
            transition: all 0.15s ease-out;
            animation: cursor-pulse 3s ease-in-out infinite;
        }
        @keyframes cursor-pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0,242,255,0.3); }
            50% { box-shadow: 0 0 0 6px rgba(0,242,255,0); }
        }
        .crosshair-inner {
            width: 4px; height: 4px; border-radius: 50%;
            background: var(--cyan); position: absolute;
        }
        .crosshair-outer::before, .crosshair-outer::after {
            content: ''; position: absolute; background: var(--cyan);
            transition: background 0.2s;
        }
        .crosshair-outer::before { width: 10px; height: 1px; left: -14px; }
        .crosshair-outer::after { width: 1px; height: 10px; top: -14px; }

        /* Corner ticks */
        .c-tick {
            position: absolute; width: 6px; height: 6px;
            border-color: var(--cyan); border-style: solid; opacity: 0.6;
        }
        .c-tick.tl { top: 3px; left: 3px; border-width: 1px 0 0 1px; }
        .c-tick.tr { top: 3px; right: 3px; border-width: 1px 1px 0 0; }
        .c-tick.bl { bottom: 3px; left: 3px; border-width: 0 0 1px 1px; }
        .c-tick.br { bottom: 3px; right: 3px; border-width: 0 1px 1px 0; }

        .cursor-data {
            position: absolute; top: 30px; left: 30px;
            font-family: var(--mono); font-size: 0.55rem;
            color: var(--cyan); white-space: nowrap;
            opacity: 0.7; letter-spacing: 1px;
        }
        /* Locked state */
        .locked .crosshair-outer {
            border-color: var(--orange); animation: none;
            box-shadow: 0 0 12px rgba(255,69,0,0.4);
        }
        .locked .crosshair-inner { background: var(--orange); }
        .locked .crosshair-outer::before,
        .locked .crosshair-outer::after { background: var(--orange); }
        .locked .c-tick { border-color: var(--orange); }
        .locked .cursor-data { color: var(--orange); }

        /* ============================================================
           TOP STATUS BAR
        ============================================================ */
        #top-bar {
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            height: 36px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 24px;
            background: linear-gradient(180deg, rgba(0,10,20,0.9) 0%, transparent 100%);
            border-bottom: 1px solid rgba(0,242,255,0.08);
            pointer-events: none;
            opacity: 0; transition: opacity 1s ease;
        }
        #top-bar.visible { opacity: 1; }
        .top-bar-left, .top-bar-right {
            display: flex; align-items: center; gap: 20px;
        }
        .tb-item {
            font-family: var(--mono); font-size: 0.55rem;
            color: var(--text-muted); letter-spacing: 2px;
            display: flex; align-items: center; gap: 6px;
        }
        .tb-dot {
            width: 5px; height: 5px; border-radius: 50%;
            background: var(--cyan); animation: dot-blink 2s infinite;
        }
        @keyframes dot-blink { 0%,100%{opacity:1;} 50%{opacity:0.2;} }
        .tb-dot.orange { background: var(--orange); }
        .tb-item span { color: var(--cyan); }

        /* ============================================================
           SIDE NAVIGATION
        ============================================================ */
        #side-nav {
            position: fixed; right: 28px; top: 50%;
            transform: translateY(-50%);
            z-index: 1000; display: flex; flex-direction: column;
            align-items: flex-end; gap: 28px;
            opacity: 0; transition: opacity 1s ease;
            pointer-events: none;
        }
        #side-nav.visible { opacity: 1; pointer-events: auto; }
        .nav-item {
            display: flex; align-items: center; gap: 10px;
            cursor: pointer; position: relative;
        }
        .nav-label {
            font-family: var(--mono); font-size: 0.5rem;
            color: var(--text-muted); letter-spacing: 3px;
            text-transform: uppercase; opacity: 0;
            transform: translateX(10px);
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        .nav-item:hover .nav-label,
        .nav-item.active .nav-label {
            opacity: 1; transform: translateX(0); color: var(--cyan);
        }
        .nav-dot {
            width: 6px; height: 6px; border-radius: 50%;
            border: 1px solid var(--text-muted);
            transition: all 0.3s ease; flex-shrink: 0;
        }
        .nav-item:hover .nav-dot,
        .nav-item.active .nav-dot {
            background: var(--cyan); border-color: var(--cyan);
            box-shadow: 0 0 8px var(--cyan);
            transform: scale(1.4);
        }
        .nav-line {
            position: absolute; right: 2px; width: 1px;
            background: rgba(0,242,255,0.2);
            top: 50%; transform-origin: top;
        }

        /* ============================================================
           SCROLL PROGRESS
        ============================================================ */
        #scroll-progress {
            position: fixed; right: 0; top: 0; bottom: 0;
            width: 2px; z-index: 999; pointer-events: none;
            background: rgba(0,242,255,0.05);
            opacity: 0; transition: opacity 1s;
        }
        #scroll-progress.visible { opacity: 1; }
        #scroll-fill {
            width: 100%; background: var(--cyan);
            box-shadow: 0 0 8px var(--cyan);
            transition: height 0.1s linear;
            position: relative;
        }
        #scroll-fill::after {
            content: '';
            position: absolute; bottom: -4px; left: 50%;
            transform: translateX(-50%);
            width: 6px; height: 6px; border-radius: 50%;
            background: var(--cyan); box-shadow: 0 0 10px var(--cyan);
        }

        /* ============================================================
           BOTTOM HUD BAR
        ============================================================ */
        #bottom-hud {
            position: fixed; bottom: 0; left: 0; right: 0;
            z-index: 1000; height: 40px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px;
            background: linear-gradient(0deg, rgba(0,10,20,0.95) 0%, transparent 100%);
            border-top: 1px solid rgba(0,242,255,0.08);
            pointer-events: none;
            opacity: 0; transition: opacity 1s ease;
        }
        #bottom-hud.visible { opacity: 1; }
        #bottom-hud .tb-item { pointer-events: auto; }
        .hud-sector-indicator {
            font-family: var(--mono); font-size: 0.6rem;
            color: var(--cyan); letter-spacing: 3px;
        }
        .hud-divider {
            width: 1px; height: 16px;
            background: rgba(0,242,255,0.2);
        }

        /* ============================================================
           SOUND BUTTON â€” UPGRADED
        ============================================================ */
        .sound-btn {
            position: fixed; bottom: 50px; left: 24px; z-index: 9999;
            color: var(--text-muted); font-family: var(--mono); font-size: 0.6rem;
            cursor: pointer; pointer-events: auto;
            display: flex; align-items: center; gap: 10px;
            transition: all 0.3s;
            padding: 8px 16px;
            background: rgba(0,10,20,0.8);
            border: 1px solid rgba(0,242,255,0.15);
            letter-spacing: 2px;
            clip-path: polygon(8px 0%, 100% 0%, calc(100% - 8px) 100%, 0% 100%);
        }
        .sound-btn:hover, .sound-btn.active {
            color: var(--cyan); border-color: var(--cyan);
            box-shadow: 0 0 20px rgba(0,242,255,0.1), inset 0 0 20px rgba(0,242,255,0.03);
        }
        .sound-waves {
            display: flex; align-items: center; gap: 2px; height: 14px;
        }
        .sound-waves span {
            display: block; width: 2px; background: currentColor;
            border-radius: 1px; transition: height 0.2s ease;
        }
        .sound-waves span:nth-child(1) { height: 4px; }
        .sound-waves span:nth-child(2) { height: 8px; animation: wave 0.8s ease-in-out infinite 0.1s; }
        .sound-waves span:nth-child(3) { height: 12px; animation: wave 0.8s ease-in-out infinite 0.2s; }
        .sound-waves span:nth-child(4) { height: 8px; animation: wave 0.8s ease-in-out infinite 0.3s; }
        .sound-waves span:nth-child(5) { height: 4px; animation: wave 0.8s ease-in-out infinite 0.4s; }
        .sound-btn:not(.active) .sound-waves span { animation: none !important; height: 2px !important; }
        @keyframes wave {
            0%, 100% { transform: scaleY(0.5); }
            50% { transform: scaleY(1.5); }
        }

        /* ============================================================
           SKILL / PROJECT MODAL â€” UPGRADED
        ============================================================ */
        #skill-modal {
            position: fixed; inset: 0; z-index: 5000;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
            background: rgba(0,5,15,0.4); backdrop-filter: blur(2px);
        }
        #skill-modal.active { opacity: 1; pointer-events: auto; }

        .modal-content {
            background: var(--surface);
            border: 1px solid rgba(0,242,255,0.35);
            padding: 0;
            width: 70%; max-width: 520px;
            position: relative;
            box-shadow: 0 0 60px rgba(0,242,255,0.08), 0 0 120px rgba(0,242,255,0.04);
            overflow: hidden;
        }
        /* Animated top bar */
        .modal-content::before {
            content: '';
            display: block; height: 2px; width: 100%;
            background: linear-gradient(90deg, transparent, var(--cyan), transparent);
            animation: modal-scan 2s linear infinite;
        }
        @keyframes modal-scan {
            0% { background-position: -100% 0; }
            100% { background-position: 200% 0; }
        }
        .modal-header {
            padding: 22px 30px 16px;
            border-bottom: 1px solid rgba(0,242,255,0.1);
            display: flex; align-items: flex-start; justify-content: space-between;
            background: rgba(0,242,255,0.02);
        }
        .modal-header-left { flex: 1; }
        #modal-type-badge {
            font-family: var(--mono); font-size: 0.5rem;
            color: var(--cyan); letter-spacing: 4px;
            margin-bottom: 8px; display: block;
            opacity: 0.7;
        }
        #modal-title {
            font-family: var(--display); color: #fff;
            font-size: 1.4rem; margin: 0;
            text-transform: uppercase; line-height: 1.1;
        }
        #modal-subtitle {
            font-family: var(--mono); color: var(--cyan);
            font-size: 0.7rem; margin: 0; display: block;
        }
        .modal-body { padding: 22px 30px 26px; }
        #modal-desc {
            font-family: var(--body); color: #bbc; font-size: 0.95rem; line-height: 1.65;
        }

        /* Corner brackets */
        .modal-corner {
            position: absolute; width: 12px; height: 12px;
            border-color: var(--cyan); border-style: solid;
        }
        .modal-corner.tl { top: 0; left: 0; border-width: 1px 0 0 1px; }
        .modal-corner.tr { top: 0; right: 0; border-width: 1px 1px 0 0; }
        .modal-corner.bl { bottom: 0; left: 0; border-width: 0 0 1px 1px; }
        .modal-corner.br { bottom: 0; right: 0; border-width: 0 1px 1px 0; }

        /* ============================================================
           ABOUT ME MODAL â€” UPGRADED
        ============================================================ */
        #about-modal {
            position: fixed;
            top: 50%; left: 5%;
            transform: translateY(-50%) translateX(-30px);
            z-index: 6000;
            opacity: 0; pointer-events: none;
            transition: opacity 0.4s ease, transform 0.4s ease;
            width: 480px; max-width: 90vw;
        }
        #about-modal.active {
            opacity: 1; pointer-events: auto;
            transform: translateY(-50%) translateX(0);
        }
        .about-panel {
            background: var(--surface);
            border: 1px solid rgba(0,242,255,0.4);
            border-left: 3px solid var(--cyan);
            padding: 0; position: relative; overflow: hidden;
            box-shadow: 0 0 60px rgba(0,242,255,0.1), -20px 0 60px rgba(0,242,255,0.05);
        }
        .about-scan {
            position: absolute; left: 0; right: 0; top: 0;
            height: 1px; background: linear-gradient(90deg, var(--cyan), transparent);
            animation: about-scan-line 3s linear infinite; pointer-events: none; z-index: 1;
        }
        @keyframes about-scan-line {
            0% { top: 0; opacity: 1; }
            80% { opacity: 0.5; }
            100% { top: 100%; opacity: 0; }
        }
        .about-header {
            padding: 24px 28px 18px;
            border-bottom: 1px solid rgba(0,242,255,0.12);
            background: rgba(0,242,255,0.025);
            position: relative;
        }
        .about-tag {
            font-family: var(--mono); font-size: 0.52rem;
            color: var(--cyan); letter-spacing: 4px;
            margin-bottom: 12px; display: flex; align-items: center; gap: 10px;
        }
        .about-tag::before {
            content: ''; display: inline-block;
            width: 16px; height: 1px; background: var(--cyan);
        }
        .about-name {
            font-family: var(--display);
            font-size: 1.5rem; color: #fff;
            text-transform: uppercase; margin: 0 0 4px 0;
        }
        .about-role {
            font-family: var(--body);
            font-size: 0.8rem; color: var(--cyan);
            font-weight: 300; letter-spacing: 1.5px;
        }
        /* Status badges */
        .about-badges {
            display: flex; gap: 8px; margin-top: 12px; flex-wrap: wrap;
        }
        .about-badge {
            font-family: var(--mono); font-size: 0.48rem;
            color: var(--text-muted); letter-spacing: 2px;
            padding: 4px 8px;
            border: 1px solid rgba(0,242,255,0.15);
            background: rgba(0,242,255,0.04);
        }
        .about-body-section {
            padding: 20px 28px 24px;
        }
        .about-body {
            font-family: var(--body); font-size: 0.86rem;
            color: #99aabb; line-height: 1.8; font-weight: 300;
        }
        .about-body p { margin: 0 0 10px 0; }
        .about-body p:last-child { margin: 0; }
        .about-hl { color: #dde; font-weight: 400; }
        .about-footer {
            margin-top: 14px; padding-top: 12px;
            border-top: 1px solid rgba(0,242,255,0.12);
            font-family: var(--mono); font-size: 0.75rem; color: var(--cyan);
            letter-spacing: 1px;
        }
        .about-panel::after {
            content: '';
            position: absolute; top: -1px; right: -1px;
            width: 20px; height: 20px;
            border-top: 2px solid var(--cyan);
            border-right: 2px solid var(--cyan);
        }

        /* ============================================================
           LOADER â€” CINEMATIC UPGRADE
        ============================================================ */
        #loader-overlay {
            position: fixed; inset: 0; background: #000008;
            z-index: 10000; cursor: pointer;
            overflow: hidden;
        }

        /* Grid bg */
        #loader-grid {
            position: absolute; inset: 0; pointer-events: none;
            background-image:
                linear-gradient(rgba(0,242,255,0.04) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,242,255,0.04) 1px, transparent 1px);
            background-size: 60px 60px;
            mask-image: radial-gradient(ellipse 70% 70% at 50% 50%, black 40%, transparent 100%);
        }

        /* Center logo area */
        #loader-center {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            display: flex; flex-direction: column; align-items: center;
            gap: 0;
        }

        .loader-ring {
            position: relative; width: 180px; height: 180px;
            display: flex; justify-content: center; align-items: center;
        }
        .loader-ring svg {
            position: absolute; inset: 0; width: 100%; height: 100%;
        }
        .ring-track { fill: none; stroke: rgba(0,242,255,0.08); stroke-width: 1; }
        .ring-progress {
            fill: none; stroke: var(--cyan); stroke-width: 1.5;
            stroke-linecap: round;
            stroke-dasharray: 502;
            stroke-dashoffset: 502;
            animation: ring-fill 3s cubic-bezier(0.4,0,0.2,1) forwards 0.5s;
            filter: drop-shadow(0 0 4px var(--cyan));
        }
        .ring-progress-2 {
            fill: none; stroke: rgba(0,242,255,0.3); stroke-width: 0.5;
            stroke-dasharray: 502;
            stroke-dashoffset: 502;
            animation: ring-fill 2s cubic-bezier(0.4,0,0.2,1) forwards 0.2s;
        }
        @keyframes ring-fill {
            to { stroke-dashoffset: 0; }
        }

        .loader-inner-text {
            position: absolute; text-align: center;
            display: flex; flex-direction: column; align-items: center; gap: 4px;
        }
        .loader-pct {
            font-family: var(--mono); font-size: 2rem; color: var(--cyan);
            text-shadow: 0 0 20px var(--cyan), 0 0 40px rgba(0,242,255,0.3);
            letter-spacing: -2px;
            animation: count-up 3s ease forwards 0.5s;
        }
        @keyframes count-up {
            0% { --n: 0; }
            100% { --n: 100; }
        }
        .loader-pct-label {
            font-family: var(--mono); font-size: 0.5rem;
            color: rgba(0,242,255,0.5); letter-spacing: 3px;
        }

        /* Boot log */
        #loader-log {
            position: absolute; bottom: 22%; left: 50%;
            transform: translateX(-50%);
            width: 400px; max-width: 90vw;
            font-family: var(--mono); font-size: 0.58rem;
            color: var(--text-muted); letter-spacing: 1px;
            line-height: 1.8;
            border-left: 1px solid rgba(0,242,255,0.2);
            padding-left: 16px;
        }
        .log-line { opacity: 0; animation: log-appear 0.3s ease forwards; }
        .log-line.ok::before { content: '[OK] '; color: #00ff88; }
        .log-line.info::before { content: '[INFO] '; color: var(--cyan); }
        .log-line.warn::before { content: '[WARN] '; color: var(--gold); }
        @keyframes log-appear { to { opacity: 1; } }

        .loader-click-text {
            position: absolute; bottom: 12%; left: 50%;
            transform: translateX(-50%);
            font-family: var(--display); font-size: 0.75rem;
            color: var(--cyan); letter-spacing: 8px;
            text-transform: uppercase;
            text-shadow: 0 0 20px var(--cyan);
            animation: click-pulse 1.5s ease-in-out infinite;
            opacity: 0;
            transition: opacity 0.5s ease;
            white-space: nowrap;
        }
        .loader-click-text.show { opacity: 1; }
        @keyframes click-pulse {
            0%, 100% { opacity: 0.4; transform: translateX(-50%) scale(1); }
            50% { opacity: 1; transform: translateX(-50%) scale(1.02); }
        }

        /* Loader top text */
        .loader-title-block {
            text-align: center; margin-top: 20px;
        }
        .loader-name {
            font-family: var(--display); font-size: 1.1rem;
            color: white; letter-spacing: 8px; text-transform: uppercase;
            opacity: 0; animation: fade-in 1s ease forwards 1s;
        }
        .loader-sub {
            font-family: var(--mono); font-size: 0.5rem;
            color: var(--text-muted); letter-spacing: 4px;
            margin-top: 6px;
            opacity: 0; animation: fade-in 1s ease forwards 1.5s;
        }
        @keyframes fade-in { to { opacity: 1; } }

        /* Corner decorations on loader */
        .loader-corner {
            position: absolute; width: 40px; height: 40px;
            border-color: rgba(0,242,255,0.3); border-style: solid;
        }
        .loader-corner.tl { top: 20px; left: 20px; border-width: 1px 0 0 1px; }
        .loader-corner.tr { top: 20px; right: 20px; border-width: 1px 1px 0 0; }
        .loader-corner.bl { bottom: 20px; left: 20px; border-width: 0 0 1px 1px; }
        .loader-corner.br { bottom: 20px; right: 20px; border-width: 0 1px 1px 0; }

        /* ============================================================
           SECTIONS â€” UPGRADED
        ============================================================ */
        .content-layer {
            position: relative; z-index: 5;
            opacity: 0; transition: opacity 2s ease;
        }
        .content-layer.visible { opacity: 1; }

        section {
            min-height: 120vh;
            display: flex; flex-direction: column; justify-content: center;
            padding: 0 10% 0 10%;
            pointer-events: none;
            position: relative;
        }

        /* Vertical sector line on left */
        section::before {
            content: '';
            position: absolute; left: 0; top: 10%; bottom: 10%;
            width: 1px;
            background: linear-gradient(180deg, transparent, rgba(0,242,255,0.12), transparent);
        }

        .section-inner {
            position: relative;
        }

        .tag {
            color: var(--cyan); font-family: var(--mono);
            font-size: 0.65rem; letter-spacing: 5px;
            display: inline-flex; align-items: center; gap: 10px;
            margin-bottom: 16px; text-transform: uppercase;
        }
        .tag::before {
            content: '';
            display: inline-block; width: 24px; height: 1px;
            background: var(--cyan);
        }
        .tag::after {
            content: attr(data-num);
            font-size: 0.5rem; color: rgba(0,242,255,0.4);
            letter-spacing: 2px;
        }

        h1 {
            font-family: var(--display);
            font-size: clamp(3rem, 9vw, 7.5rem);
            font-weight: 700; margin: 0;
            line-height: 0.88; text-transform: uppercase;
            position: relative;
        }

        /* Ghost text behind h1 */
        h1 .ghost {
            position: absolute; inset: 0;
            font-family: var(--display);
            color: transparent;
            -webkit-text-stroke: 1px rgba(0,242,255,0.07);
            font-size: inherit; font-weight: inherit;
            line-height: inherit;
            transform: translate(4px, 4px);
            pointer-events: none;
            user-select: none;
        }

        p.lead {
            font-size: 1.1rem; max-width: 520px; color: #889ab0;
            margin-top: 24px; font-weight: 300; line-height: 1.7;
            font-family: var(--body);
            border-left: 2px solid rgba(0,242,255,0.2);
            padding-left: 16px;
        }

        /* Section number watermark */
        .section-watermark {
            position: absolute; right: -2%;
            top: 50%; transform: translateY(-50%);
            font-family: var(--display);
            font-size: clamp(6rem, 18vw, 16rem);
            color: transparent;
            -webkit-text-stroke: 1px rgba(0,242,255,0.04);
            font-weight: 700; pointer-events: none;
            user-select: none; line-height: 1;
            letter-spacing: -10px;
        }

        /* ============================================================
           HUD LABELS
        ============================================================ */
        .hud-label {
            position: absolute; color: var(--cyan);
            font-family: var(--mono); font-size: 0.55rem;
            border-left: 2px solid var(--cyan); padding-left: 10px;
            opacity: 0; pointer-events: none;
            transition: opacity 0.3s; white-space: nowrap;
            letter-spacing: 2px;
        }

        /* ============================================================
           SECTION 01 - HERO SPECIAL STYLING
        ============================================================ */
        .hero-section { min-height: 130vh; }
        .hero-role {
            font-family: var(--mono); font-size: 0.8rem;
            color: var(--cyan); letter-spacing: 4px;
            margin-top: 20px; opacity: 0.8;
        }

        /* ============================================================
           SECTOR TRANSITION â€” GAS & METEOROID CANVAS
        ============================================================ */

        /* Canvas layer: gases + meteoroids drawn here */
        #transition-canvas {
            position: fixed; inset: 0; z-index: 8000;
            pointer-events: none; opacity: 0;
            width: 100%; height: 100%;
            transition: opacity 0.15s;
        }
        #transition-canvas.active { opacity: 1; }

        /* Sector name card floats above canvas */
        #sector-transition {
            position: fixed; inset: 0; z-index: 8001;
            pointer-events: none;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.3s ease;
        }
        #sector-transition.fire { opacity: 1; }

        .sector-card {
            display: flex; flex-direction: column; align-items: center; gap: 10px;
            opacity: 0; transform: scale(0.9) translateY(14px);
            text-align: center;
            transition: opacity 0.4s ease, transform 0.5s cubic-bezier(0.16,1,0.3,1);
        }
        #sector-transition.fire .sector-card { opacity: 1; transform: scale(1) translateY(0); }
        #sector-transition.fadeout .sector-card {
            opacity: 0; transform: scale(0.96) translateY(-12px);
            transition: opacity 0.45s ease, transform 0.45s ease;
        }
        .sector-card-tag {
            font-family: var(--mono); font-size: 0.6rem;
            letter-spacing: 6px; text-transform: uppercase; opacity: 0.7;
        }
        .sector-card-label {
            font-family: var(--display); font-size: clamp(3rem, 10vw, 8rem);
            color: white; text-transform: uppercase;
            font-weight: 700; line-height: 0.85; letter-spacing: 2px;
        }
        .sector-card-sub {
            font-family: var(--mono); font-size: 0.65rem;
            letter-spacing: 8px;
            border-top: 1px solid rgba(255,255,255,0.15);
            padding-top: 10px; margin-top: 4px; width: 100%;
        }

        /* HUD alert strip */
        #sector-alert {
            position: fixed; bottom: 44px; left: 50%;
            transform: translateX(-50%) translateY(20px);
            z-index: 8002; pointer-events: none;
            font-family: var(--mono); font-size: 0.55rem;
            color: var(--cyan); letter-spacing: 5px;
            background: rgba(0,10,20,0.9);
            border: 1px solid rgba(0,242,255,0.3);
            border-top: 2px solid var(--cyan);
            padding: 8px 24px; opacity: 0; white-space: nowrap;
            clip-path: polygon(12px 0%, calc(100% - 12px) 0%, 100% 100%, 0% 100%);
        }
        #sector-alert.show {
            animation: alert-pop 2.2s cubic-bezier(0.16,1,0.3,1) forwards;
        }
        @keyframes alert-pop {
            0%   { opacity: 0; transform: translateX(-50%) translateY(20px); }
            15%  { opacity: 1; transform: translateX(-50%) translateY(0); }
            70%  { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
        }

        /* ============================================================
           RESPONSIVE
        ============================================================ */
        @media (max-width: 768px) {
            #side-nav { display: none; }
            section { padding: 0 6% 0 8%; }
            .about-panel { width: calc(100vw - 40px); }
            #about-modal { left: 20px; right: 20px; width: auto; }
        }
    </style>
</head>
<body>

    <!-- ======= CUSTOM CURSOR ======= -->
    <div id="cursor-hud">
        <div class="crosshair-outer">
            <div class="c-tick tl"></div>
            <div class="c-tick tr"></div>
            <div class="c-tick bl"></div>
            <div class="c-tick br"></div>
            <div class="crosshair-inner"></div>
        </div>
        <div class="cursor-data" id="cursor-xy">X: 000 | Y: 000</div>
    </div>

    <!-- ======= TOP STATUS BAR ======= -->
    <div id="top-bar">
        <div class="top-bar-left">
            <div class="tb-item">
                <div class="tb-dot"></div>
                SYS_ONLINE
            </div>
            <div class="tb-item">JY_PORTFOLIO <span>v2.4.1</span></div>
            <div class="tb-item">PILOT: <span>JEEVAN YADAV</span></div>
        </div>
        <div class="top-bar-right">
            <div class="tb-item" id="tb-sector">SECTOR: <span id="tb-sector-val">01</span></div>
            <div class="tb-item">DEPTH: <span id="tb-depth">0.00</span></div>
            <div class="tb-item">
                <div class="tb-dot orange"></div>
                ENGINE ACTIVE
            </div>
        </div>
    </div>

    <!-- ======= SIDE NAVIGATION ======= -->
    <nav id="side-nav">
        <div class="nav-item active" data-sector="0" onclick="navTo(0)">
            <span class="nav-label">INTRO</span>
            <div class="nav-dot"></div>
        </div>
        <div class="nav-item" data-sector="1" onclick="navTo(1)">
            <span class="nav-label">PROJECTS</span>
            <div class="nav-dot"></div>
        </div>
        <div class="nav-item" data-sector="2" onclick="navTo(2)">
            <span class="nav-label">SKILLS</span>
            <div class="nav-dot"></div>
        </div>
        <div class="nav-item" data-sector="3" onclick="navTo(3)">
            <span class="nav-label">EDUCATION</span>
            <div class="nav-dot"></div>
        </div>
        <div class="nav-item" data-sector="4" onclick="navTo(4)">
            <span class="nav-label">CONTACT</span>
            <div class="nav-dot"></div>
        </div>
    </nav>

    <!-- ======= SCROLL PROGRESS ======= -->
    <div id="scroll-progress">
        <div id="scroll-fill" style="height:0%"></div>
    </div>

    <!-- ======= BOTTOM HUD ======= -->
    <div id="bottom-hud">
        <div class="top-bar-left">
            <div class="tb-item hud-sector-indicator" id="sector-name-display">â–¸ SECTOR_01 // INTRODUCTION</div>
        </div>
        <div class="top-bar-right">
            <div class="tb-item">SCROLL: <span id="scroll-pct-display">0%</span></div>
            <div class="hud-divider"></div>
            <div class="sound-btn" id="sound-toggle">
                <div class="sound-waves">
                    <span></span><span></span><span></span><span></span><span></span>
                </div>
                <span id="sound-text">SND: OFF</span>
            </div>
        </div>
    </div>

    <!-- ======= SKILL MODAL â€” UPGRADED ======= -->
    <div id="skill-modal" onclick="closeBrief()">
        <div class="modal-content">
            <div class="modal-corner tl"></div>
            <div class="modal-corner tr"></div>
            <div class="modal-corner bl"></div>
            <div class="modal-corner br"></div>
            <div class="modal-header">
                <div class="modal-header-left">
                    <span id="modal-type-badge">DATA NODE</span>
                    <h1 id="modal-title">DATA</h1>
                </div>
                <span id="modal-subtitle">...</span>
            </div>
            <div class="modal-body">
                <p id="modal-desc">...</p>
            </div>
        </div>
    </div>

    <!-- ======= ABOUT ME PANEL ======= -->
    <div id="about-modal">
        <div class="about-panel">
            <div class="about-scan"></div>
            <div class="about-header">
                <div class="about-tag">PILOT_PROFILE // SECTOR_01</div>
                <h2 class="about-name">Jeevan Yadav</h2>
                <div class="about-role">Full Stack Developer &nbsp;Â·&nbsp; Blockchain &nbsp;Â·&nbsp; Web3</div>
                <div class="about-badges">
                    <span class="about-badge">â—ˆ OPEN TO WORK</span>
                    <span class="about-badge">â—ˆ WEB3 DEV</span>
                    <span class="about-badge">â—ˆ OSS CONTRIBUTOR</span>
                </div>
            </div>
            <div class="about-body-section">
                <div class="about-body">
                    <p>I'm a Full Stack Developer with a strong interest in <span class="about-hl">Blockchain, Web3,</span> and modern web technologies. I enjoy building scalable, user-friendly applications and turning complex ideas into clean, functional digital products.</p>
                    <p>I've worked with <span class="about-hl">JavaScript, React, Node.js, MongoDB, Solidity,</span> and Web3 tools â€” continuously exploring system design, advanced web dev, and decentralized systems.</p>
                    <p>Currently focused on building real-world projects, contributing to open-source, and sharpening skills in Blockchain, Web3, and AI-driven applications. I believe in learning by building.</p>
                    <div class="about-footer">ðŸš€ Always curious. Always building. Always improving.</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ======= SECTOR TRANSITION: GAS + METEOROID CANVAS ======= -->
    <canvas id="transition-canvas"></canvas>
    <div id="sector-transition">
        <div class="sector-card">
            <div class="sector-card-tag" id="tc-tag">ENTERING</div>
            <div class="sector-card-label" id="tc-label">SECTOR 02</div>
            <div class="sector-card-sub" id="tc-sub">KEY PROJECTS</div>
        </div>
    </div>
    <div id="sector-alert">â–¸ ENTERING SECTOR_02</div>

    <!-- ======= LOADER â€” CINEMATIC ======= -->
    <div id="loader-overlay" onclick="launchSequence()">
        <div class="loader-corner tl"></div>
        <div class="loader-corner tr"></div>
        <div class="loader-corner bl"></div>
        <div class="loader-corner br"></div>
        <div id="loader-grid"></div>

        <div id="loader-center">
            <div class="loader-ring">
                <svg viewBox="0 0 180 180">
                    <circle class="ring-track" cx="90" cy="90" r="80"/>
                    <circle class="ring-progress-2" cx="90" cy="90" r="80" transform="rotate(-90 90 90)"/>
                    <circle class="ring-progress" cx="90" cy="90" r="80" transform="rotate(-90 90 90)"/>
                </svg>
                <div class="loader-inner-text">
                    <div class="loader-pct" id="loader-pct">0%</div>
                    <div class="loader-pct-label">BOOT</div>
                </div>
            </div>
            <div class="loader-title-block">
                <div class="loader-name">JEEVAN YADAV</div>
                <div class="loader-sub">SPACE NARRATIVE // PORTFOLIO v2.4</div>
            </div>
        </div>

        <div id="loader-log">
            <div class="log-line info" style="animation-delay:0.6s">Initializing render engine...</div>
            <div class="log-line ok" style="animation-delay:1.1s">THREE.js r128 loaded</div>
            <div class="log-line ok" style="animation-delay:1.5s">Starfield generated [40000 particles]</div>
            <div class="log-line info" style="animation-delay:2.0s">Loading GLTF assets...</div>
            <div class="log-line ok" style="animation-delay:2.4s">Robot model mounted</div>
            <div class="log-line warn" style="animation-delay:2.7s">Sound: awaiting user gesture</div>
            <div class="log-line ok" style="animation-delay:3.1s">All systems nominal</div>
        </div>

        <div class="loader-click-text" id="click-prompt">[ CLICK TO LAUNCH ]</div>
    </div>

    <!-- ======= HUD LABELS ======= -->
    <div id="labels">
        <div id="lbl-head" class="hud-label">LOGIC_CORE [ACTIVE]</div>
        <div id="lbl-obj" class="hud-label"
            style="border-left:none; border-right:2px solid var(--cyan); padding-right:10px; padding-left:0; text-align:right; opacity:0;">
            <span id="obj-name">UNKNOWN</span><br>
            <span style="font-size:0.45rem; color:#667799; letter-spacing:2px;">ANALYZING</span>
        </div>
    </div>

    <div id="canvas-container"></div>

    <!-- ======= CONTENT SECTIONS â€” UPGRADED ======= -->
    <div class="content-layer" id="main-content">

        <!-- SECTOR 01: INTRO -->
        <section class="hero-section" id="sec-0">
            <div class="section-inner">
                <span class="tag" data-num="// 001">SECTOR_01</span>
                <div style="height: 240px;"></div>
                <div class="hero-role">BLOCKCHAIN DEV &nbsp;/&nbsp; WEB3 ARCHITECT &nbsp;/&nbsp; FULL STACK</div>
            </div>
            <div class="section-watermark">01</div>
        </section>

        <!-- SECTOR 02: PROJECTS -->
        <section id="sec-1">
            <div class="section-inner">
                <span class="tag" data-num="// 002">SECTOR_02</span>
                <h1>KEY<br>PROJECTS<span class="ghost" aria-hidden="true">KEY<br>PROJECTS</span></h1>
                <p class="lead">Hover over the Data Cubes to scan mission files.</p>
            </div>
            <div class="section-watermark">02</div>
        </section>

        <!-- SECTOR 03: SKILLS -->
        <section id="sec-2">
            <div class="section-inner">
                <span class="tag" data-num="// 003">SECTOR_03</span>
                <h1>SKILLS &amp;<br>STACK<span class="ghost" aria-hidden="true">SKILLS &amp;<br>STACK</span></h1>
                <p class="lead">Scanning the Asteroid Field. Each rock holds a technology.</p>
            </div>
            <div class="section-watermark">03</div>
        </section>

        <!-- SECTOR 04: EDUCATION -->
        <section id="sec-3">
            <div class="section-inner">
                <span class="tag" data-num="// 004">SECTOR_04</span>
                <h1>ACADEMIC<br>LOGS<span class="ghost" aria-hidden="true">ACADEMIC<br>LOGS</span></h1>
                <p class="lead">Education & Certifications. Knowledge encoded in crystal.</p>
            </div>
            <div class="section-watermark">04</div>
        </section>

        <!-- SECTOR 05: CONTACT -->
        <section id="sec-4">
            <div class="section-inner">
                <span class="tag" data-num="// 005">SECTOR_05</span>
                <h1>CONTACT<br>UPLINK<span class="ghost" aria-hidden="true">CONTACT<br>UPLINK</span></h1>
                <p class="lead">Click UFOs to establish connection and open a channel.</p>
            </div>
            <div class="section-watermark">05</div>
        </section>

        <!-- SYSTEM END -->
        <section style="justify-content: center; align-items: center; min-height: 100vh; padding: 0;" id="sec-5">
            <div style="text-align: center; position: relative;">
                <span class="tag" style="color: var(--orange); border-color: var(--orange); justify-content: center;" data-num="">SYSTEM_END</span>
                <h1 style="font-size: clamp(1.5rem, 5vw, 3rem); color: var(--orange); margin-top: 16px; letter-spacing: 4px;">
                    RE-INITIALIZE<br>SEQUENCE
                </h1>
                <p class="lead" style="margin: 16px auto 0; text-align:center; border:none; padding:0; color:#554433;">
                    [ HOVER SHIP Â· CLICK TO WARP ]
                </p>
            </div>
        </section>

        <div style="height: 20vh;"></div>
    </div>

    <!-- ======= ALL ORIGINAL JAVASCRIPT (UNCHANGED) + UI ADDITIONS ======= -->
    <script type="module">

        // --- DATA ---
        const projectsData = [
            { name: "PROJECT ALPHA", desc: "A revolutionary DeFi protocol built on Ethereum.", pos: {x: -5, y: 1, z: -20} },
            { name: "PROJECT BETA", desc: "Next-gen NFT marketplace with zero gas fees.", pos: {x: 5, y: -1, z: -20} },
            { name: "PROJECT GAMMA", desc: "AI-driven DAO governance voting system.", pos: {x: 0, y: 3, z: -20} }
        ];

        const skillsData = [
            { name: "SOLIDITY", pos: { x: -8, y: 3, z: -40 }, desc: "Expertise in writing secure smart contracts.", level: "MASTERY: 90%" },
            { name: "THREE.JS", pos: { x: 8, y: 4, z: -40 }, desc: "Creating immersive 3D web experiences.", level: "MASTERY: 85%" },
            { name: "C++ / DSA", pos: { x: -6, y: -4, z: -40 }, desc: "Algorithms & Logic.", level: "MASTERY: 95%" },
            { name: "REACT", pos: { x: 6, y: -3, z: -40 }, desc: "Frontend Architecture.", level: "MASTERY: 92%" },
            { name: "SYS ARCH", pos: { x: 0, y: 0, z: -40 }, desc: "System Design.", level: "MASTERY: 88%" }
        ];

        const eduData = [
            { name: "BACHELOR DEGREE", desc: "2022-2026 | Computer Science Engineering", pos: {x: -4, y: 1, z: -60} },
            { name: "MASTER CERT", desc: "2024 | Advanced Blockchain Security", pos: {x: 4, y: -1, z: -60} }
        ];

        const contactData = [
            { id: "linkedin", label: "in", url: "https://linkedin.com", pos: { x: -6, y: 2, z: -80 } },
            { id: "gmail", label: "M", url: "mailto:jeevanyadav9898@gmail.com", pos: { x: 0, y: 3, z: -80 } },
            { id: "github", label: "Git", url: "https://github.com", pos: { x: 6, y: 2, z: -80 } }
        ];

        // --- SETUP ---
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x050505, 0.015);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        camera.position.z = 5;
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // --- GROUPS ---
        const projectGroup = new THREE.Group(); scene.add(projectGroup);
        const asteroidGroup = new THREE.Group(); scene.add(asteroidGroup);
        const eduGroup = new THREE.Group(); scene.add(eduGroup);
        const ufoGroup = new THREE.Group(); scene.add(ufoGroup);
        const warpGroup = new THREE.Group(); scene.add(warpGroup);
        
        // --- LIGHTS ---
        const dirLight = new THREE.DirectionalLight(0xffffff, 1); dirLight.position.set(5, 5, 5); scene.add(dirLight);
        const blueLight = new THREE.PointLight(0x00f2ff, 2, 50); blueLight.position.set(-5, 0, 5); scene.add(blueLight);
        const ambient = new THREE.AmbientLight(0x222222); scene.add(ambient);

        // --- ASSETS ---
        const manager = new THREE.LoadingManager();
        const gltfLoader = new THREE.GLTFLoader(manager);
        const fontLoader = new THREE.FontLoader(manager);

        // --- PROCEDURAL SPACESHIP ---
        const playerShip = new THREE.Group();
        scene.add(playerShip);
        
        const hullMat = new THREE.MeshStandardMaterial({ 
            color: 0xffffff, metalness: 0.6, roughness: 0.4, emissive: 0x222222
        });
        const hull = new THREE.Mesh(new THREE.CylinderGeometry(0.3, 0.6, 4, 8), hullMat);
        hull.rotation.x = Math.PI / 2; hull.position.z = 0.5;
        playerShip.add(hull);

        const cockMat = new THREE.MeshBasicMaterial({ color: 0x00f2ff });
        const cockpit = new THREE.Mesh(new THREE.BoxGeometry(0.5, 0.4, 1.2), cockMat);
        cockpit.position.y = 0.35; cockpit.position.z = -0.2;
        playerShip.add(cockpit);

        const wingL = new THREE.Mesh(new THREE.BoxGeometry(2.5, 0.1, 2), hullMat); wingL.position.set(-1.2, 0, 1.5);
        const wingR = new THREE.Mesh(new THREE.BoxGeometry(2.5, 0.1, 2), hullMat); wingR.position.set(1.2, 0, 1.5);
        playerShip.add(wingL); playerShip.add(wingR);

        const engineMat = new THREE.MeshStandardMaterial({ color: 0x444444 });
        const glowMat = new THREE.MeshBasicMaterial({ color: 0x00f2ff });
        const engGeo = new THREE.CylinderGeometry(0.35, 0.5, 1.5, 16);
        const engL = new THREE.Mesh(engGeo, engineMat); engL.rotation.x = Math.PI/2; engL.position.set(-1.5, 0, 1.5);
        const engR = new THREE.Mesh(engGeo, engineMat); engR.rotation.x = Math.PI/2; engR.position.set(1.5, 0, 1.5);
        const gL = new THREE.Mesh(new THREE.CircleGeometry(0.3, 16), glowMat); gL.position.y = -0.76; gL.rotation.x = Math.PI/2; engL.add(gL);
        const gR = new THREE.Mesh(new THREE.CircleGeometry(0.3, 16), glowMat); gR.position.y = -0.76; gR.rotation.x = Math.PI/2; engR.add(gR);
        playerShip.add(engL); playerShip.add(engR);

        const shipLight = new THREE.PointLight(0xffffff, 2, 20);
        shipLight.position.set(0, 3, 0);
        playerShip.add(shipLight);

        playerShip.scale.set(1.2, 1.2, 1.2); 
        playerShip.position.set(0, -1, 3);

        // --- WARP LINES ---
        const warpCount = 600;
        const warpGeo = new THREE.BufferGeometry();
        const warpPositions = new Float32Array(warpCount * 6);
        for(let i=0; i<warpCount; i++) {
            let x = (Math.random() - 0.5) * 150; let y = (Math.random() - 0.5) * 150; let z = (Math.random() - 0.5) * 150;
            let idx = i * 6;
            warpPositions[idx] = x; warpPositions[idx+1] = y; warpPositions[idx+2] = z;
            warpPositions[idx+3] = x; warpPositions[idx+4] = y; warpPositions[idx+5] = z - 30; 
        }
        warpGeo.setAttribute('position', new THREE.BufferAttribute(warpPositions, 3));
        const warpMat = new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0 });
        const warpLines = new THREE.LineSegments(warpGeo, warpMat);
        warpGroup.add(warpLines);

        // ROBOT
        let robot, head, mixer, eyesMat;
        gltfLoader.load('https://threejs.org/examples/models/gltf/RobotExpressive/RobotExpressive.glb', (gltf) => {
            robot = gltf.scene;
            robot.scale.set(0.8, 0.8, 0.8);
            robot.position.set(3, -2, -2);
            robot.visible = false;
            scene.add(robot);
            mixer = new THREE.AnimationMixer(robot);
            const idle = gltf.animations.find(a => a.name === 'Idle');
            if(idle) mixer.clipAction(idle).play();
            robot.traverse(o => { 
                if(o.isMesh && o.name.includes('Eye')) { o.material = new THREE.MeshBasicMaterial({ color: 0x00f2ff }); eyesMat = o.material; }
                if(o.isBone && o.name === 'Head') head = o; 
            });
        });

        // RINGS
        const rings = [];
        const ringGeo = new THREE.TorusGeometry(8, 0.05, 16, 100);
        const ringMat = new THREE.MeshBasicMaterial({ color: 0x00f2ff, transparent: true, opacity: 0.3 });
        const ringPositions = [0, -20, -40, -60, -80]; 
        ringPositions.forEach(zPos => {
            const r = new THREE.Mesh(ringGeo, ringMat);
            r.position.z = zPos;
            scene.add(r);
            rings.push(r);
        });

        // STARS
        const starsGeo = new THREE.BufferGeometry();
        const starsCount = 40000;
        const posArray = new Float32Array(starsCount * 3);
        for(let i=0; i<starsCount*3; i++) posArray[i] = (Math.random()-0.5)*300;
        starsGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const starField = new THREE.Points(starsGeo, new THREE.PointsMaterial({size:0.05, color:0xffffff, transparent:true, opacity:0.8}));
        scene.add(starField);

        // DUST
        const dustGeo = new THREE.BufferGeometry();
        const dustPos = new Float32Array(10000);
        for(let i=0; i<10000; i++) dustPos[i] = (Math.random()-0.5)*50;
        dustGeo.setAttribute('position', new THREE.BufferAttribute(dustPos, 3));
        const dustSystem = new THREE.Points(dustGeo, new THREE.PointsMaterial({size:0.02, color:0x00f2ff, opacity:0.4, transparent:true}));
        scene.add(dustSystem);

        // FONTS
        fontLoader.load('https://threejs.org/examples/fonts/droid/droid_sans_regular.typeface.json', (font) => {
            const whiteMat = new THREE.MeshBasicMaterial({color: 0xffffff});
            
            const createName = (str, y) => {
                let x = -6.5;
                for(let char of str) {
                    const g = new THREE.TextGeometry(char, {font:font, size:0.8, height:0.1});
                    g.computeBoundingBox();
                    const w = g.boundingBox.max.x - g.boundingBox.min.x;
                    const m = new THREE.Mesh(g, whiteMat);
                    m.position.set(x, y, -2); scene.add(m); x += w + 0.1;
                }
            };
            createName("JEEVAN", 1.2); createName("YADAV", 0);

            const boxGeo = new THREE.BoxGeometry(2, 2, 2);
            const boxMat = new THREE.MeshBasicMaterial({color: 0x00f2ff, wireframe:true});
            projectsData.forEach((p, i) => {
                const m = new THREE.Mesh(boxGeo, boxMat);
                m.position.set(p.pos.x, p.pos.y, p.pos.z);
                m.userData = { type: 'project', data: p, originalY: p.pos.y, offset: i };
                projectGroup.add(m);
            });

            const astGeo = new THREE.IcosahedronGeometry(1, 1);
            const astMat = new THREE.MeshStandardMaterial({color:0x222222, roughness:0.8, flatShading:true});
            const astWire = new THREE.MeshBasicMaterial({color:0x00f2ff, wireframe:true, transparent:true, opacity:0.1});
            skillsData.forEach(s => {
                const grp = new THREE.Group();
                grp.add(new THREE.Mesh(astGeo, astMat));
                grp.add(new THREE.Mesh(astGeo, astWire));
                grp.children[1].scale.set(1.1,1.1,1.1);
                grp.position.set(s.pos.x, s.pos.y, s.pos.z);
                grp.userData = { type: 'skill', data: s, name: s.name };
                asteroidGroup.add(grp);
            });

            const pyrGeo = new THREE.TetrahedronGeometry(1.5);
            const pyrMat = new THREE.MeshBasicMaterial({color: 0xffd700, wireframe:true});
            eduData.forEach((e, i) => {
                const m = new THREE.Mesh(pyrGeo, pyrMat);
                m.position.set(e.pos.x, e.pos.y, e.pos.z);
                m.userData = { type: 'edu', data: e, originalY: e.pos.y, offset: i };
                eduGroup.add(m);
            });

            const ufoBodyMat = new THREE.MeshStandardMaterial({ color: 0x111111, metalness: 0.8, roughness: 0.2 });
            const ufoCockpitMat = new THREE.MeshBasicMaterial({ color: 0x00f2ff });
            const rockMat = new THREE.MeshStandardMaterial({color:0x444444, roughness:1, flatShading:true});
            
            contactData.forEach(c => {
                const ufoUnit = new THREE.Group();
                const ufoMesh = new THREE.Group(); 
                const body = new THREE.Mesh(new THREE.SphereGeometry(1.5, 32, 16), ufoBodyMat);
                body.scale.set(1, 0.3, 1);
                const cockpit = new THREE.Mesh(new THREE.SphereGeometry(0.7, 32, 16), ufoCockpitMat);
                cockpit.position.y = 0.3;
                ufoMesh.add(body); ufoMesh.add(cockpit);
                ufoMesh.position.y = 4;
                const beam = new THREE.Mesh(new THREE.CylinderGeometry(0.1,2,8,32,1,true), new THREE.MeshBasicMaterial({color:0x00f2ff, transparent:true, opacity:0.1, side:THREE.DoubleSide, blending:THREE.AdditiveBlending}));
                const tGeo = new THREE.TextGeometry(c.label, {font:font, size:1.5, height:0.5, bevelEnabled:true, bevelThickness:0.1, bevelSize:0.05});
                const pos = tGeo.attributes.position;
                for(let i=0; i<pos.count; i++) pos.setXYZ(i, pos.getX(i)+(Math.random()-0.5)*0.2, pos.getY(i)+(Math.random()-0.5)*0.2, pos.getZ(i)+(Math.random()-0.5)*0.2);
                tGeo.computeVertexNormals(); tGeo.computeBoundingBox();
                const center = -0.5*(tGeo.boundingBox.max.x - tGeo.boundingBox.min.x);
                const txt = new THREE.Mesh(tGeo, rockMat);
                txt.position.set(center, -4, 0); txt.rotation.x = -Math.PI/6;
                ufoUnit.add(ufoMesh); ufoUnit.add(beam); ufoUnit.add(txt);
                ufoUnit.position.set(c.pos.x, c.pos.y, c.pos.z);
                ufoUnit.userData = { type: 'ufo', url: c.url };
                ufoGroup.add(ufoUnit);
            });
        });

        // --- LOGIC ---
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        const clock = new THREE.Clock();
        
        let hoveredObj = null;
        let isHoveredRobot = false;
        let isHoveredEndShip = false;
        let currentScroll = 0;
        let targetScroll = 0;
        let isLaunched = false;
        let isLoopReady = false;

        // ABOUT MODAL
        const aboutModal = document.getElementById('about-modal');
        let aboutOpen = false;
        function showAbout() { if(aboutOpen) return; aboutOpen = true; aboutModal.classList.add('active'); }
        function hideAbout() { if(!aboutOpen) return; aboutOpen = false; aboutModal.classList.remove('active'); }

        // SECTOR NAMES for HUD
        const sectorNames = [
            'SECTOR_01 // INTRODUCTION',
            'SECTOR_02 // KEY PROJECTS',
            'SECTOR_03 // SKILLS & STACK',
            'SECTOR_04 // ACADEMIC LOGS',
            'SECTOR_05 // CONTACT UPLINK',
            'SECTOR_END // WARP POINT'
        ];

        // ---- SECTOR TRANSITION: GAS CLOUDS + METEOROIDS ----

        const sectorBoundaries = [
            { pct: 0.15, label: 'KEY\nPROJECTS',   sub: 'SECTOR_02 // DATA CUBES',     tag: 'ENTERING', palette: 'cyan'   },
            { pct: 0.35, label: 'SKILLS\n& STACK',  sub: 'SECTOR_03 // ASTEROID FIELD', tag: 'ENTERING', palette: 'green'  },
            { pct: 0.55, label: 'ACADEMIC\nLOGS',   sub: 'SECTOR_04 // CRYSTAL LOGS',   tag: 'ENTERING', palette: 'gold'   },
            { pct: 0.75, label: 'CONTACT\nUPLINK',  sub: 'SECTOR_05 // UFO CHANNEL',    tag: 'ENTERING', palette: 'violet' },
            { pct: 0.95, label: 'WARP\nPOINT',      sub: 'SYSTEM_END // RE-INITIALIZE', tag: 'WARNING',  palette: 'fire'   },
        ];

        // Color palettes per sector [gasColors, meteorTint, glowColor]
        const PALETTES = {
            cyan:   { gas: [[0,220,255],[0,180,220],[40,255,255],[0,100,180]],   rock: [120,160,180], glow: [0,220,255]   },
            green:  { gas: [[0,255,160],[0,200,120],[80,255,180],[0,160,80]],    rock: [80,160,120],  glow: [0,255,160]   },
            gold:   { gas: [[255,200,40],[255,160,0],[255,230,100],[200,140,0]], rock: [180,140,60],  glow: [255,200,40]  },
            violet: { gas: [[180,80,255],[220,60,200],[140,40,255],[100,0,200]], rock: [120,60,160],  glow: [180,80,255]  },
            fire:   { gas: [[255,80,0],[255,40,0],[255,160,0],[200,0,0]],        rock: [160,60,30],   glow: [255,80,0]    },
        };

        const txCanvas = document.getElementById('transition-canvas');
        const txCtx    = txCanvas.getContext('2d');
        let txW, txH;

        function resizeTxCanvas() {
            txW = txCanvas.width  = window.innerWidth;
            txH = txCanvas.height = window.innerHeight;
        }
        resizeTxCanvas();
        window.addEventListener('resize', resizeTxCanvas);

        // ---------- GAS CLOUD CLASS ----------
        class GasCloud {
            constructor(pal) {
                const col = pal.gas[Math.floor(Math.random() * pal.gas.length)];
                this.r   = col[0];
                this.g   = col[1];
                this.b   = col[2];
                // Spawn across full screen with bias toward center swirl
                this.x   = txW * (0.1 + Math.random() * 0.8);
                this.y   = txH * (0.05 + Math.random() * 0.9);
                this.rad = 100 + Math.random() * 260;
                this.vx  = (Math.random() - 0.5) * 1.2;
                this.vy  = (Math.random() - 0.5) * 1.2;
                this.life    = 0;          // 0â†’1
                this.speed   = 0.006 + Math.random() * 0.006;
                this.maxAlph = 0.045 + Math.random() * 0.07;
                // Slight elliptical warp
                this.scaleX  = 0.6 + Math.random() * 0.8;
                this.scaleY  = 0.6 + Math.random() * 0.8;
                this.rotation = Math.random() * Math.PI * 2;
                this.rotSpeed = (Math.random() - 0.5) * 0.008;
            }
            update() {
                this.life += this.speed;
                this.x += this.vx; this.y += this.vy;
                this.rotation += this.rotSpeed;
            }
            get alpha() { return this.maxAlph * Math.sin(Math.min(this.life, 1) * Math.PI); }
            get dead()  { return this.life >= 1; }
            draw(ctx) {
                const a = this.alpha;
                if (a <= 0) return;
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);
                ctx.scale(this.scaleX, this.scaleY);
                const grad = ctx.createRadialGradient(0, 0, 0, 0, 0, this.rad);
                grad.addColorStop(0,   `rgba(${this.r},${this.g},${this.b},${(a * 1.8).toFixed(3)})`);
                grad.addColorStop(0.4, `rgba(${this.r},${this.g},${this.b},${(a * 0.6).toFixed(3)})`);
                grad.addColorStop(1,   `rgba(${this.r},${this.g},${this.b},0)`);
                ctx.fillStyle = grad;
                ctx.beginPath();
                ctx.arc(0, 0, this.rad, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }

        // ---------- METEOROID CLASS ----------
        class Meteoroid {
            constructor(pal) {
                // Random spawn from left or right edge
                this.fromLeft = Math.random() > 0.5;
                this.y     = txH * (0.05 + Math.random() * 0.9);
                this.x     = this.fromLeft ? -120 : txW + 120;
                // Speed: fast enough to cross screen in ~1-1.5s
                const spd  = 9 + Math.random() * 14;
                this.vx    = this.fromLeft ? spd : -spd;
                this.vy    = (Math.random() - 0.5) * 4;
                this.rot   = Math.random() * Math.PI * 2;
                this.rotSpd = (Math.random() - 0.5) * 0.18;
                this.size  = 6 + Math.random() * 22;
                this.verts = this._makeShape();
                this.trail = [];
                this.maxTrail = 18;
                // Rock color from palette
                const [rr,rg,rb] = pal.rock;
                const lum = 0.7 + Math.random() * 0.5;
                this.fillColor   = `rgb(${Math.round(rr*lum)},${Math.round(rg*lum)},${Math.round(rb*lum)})`;
                this.strokeColor = `rgba(${pal.glow[0]},${pal.glow[1]},${pal.glow[2]},0.5)`;
                this.glowColor   = `rgba(${pal.glow[0]},${pal.glow[1]},${pal.glow[2]},0.15)`;
                this.alpha = 1;
            }
            _makeShape() {
                const sides = 5 + Math.floor(Math.random() * 5);
                return Array.from({length: sides}, (_, i) => {
                    const angle = (i / sides) * Math.PI * 2 + (Math.random() - 0.5) * 0.6;
                    const r = this.size * (0.55 + Math.random() * 0.65);
                    return [Math.cos(angle) * r, Math.sin(angle) * r];
                });
            }
            update() {
                this.trail.push({x: this.x, y: this.y, a: this.alpha});
                if (this.trail.length > this.maxTrail) this.trail.shift();
                this.x   += this.vx;
                this.y   += this.vy;
                this.rot += this.rotSpd;
                // Fade when near edges
                const margin = 80;
                if (!this.fromLeft && this.x < margin) this.alpha = Math.max(0, this.x / margin);
                if (this.fromLeft  && this.x > txW - margin) this.alpha = Math.max(0, (txW - this.x) / margin);
            }
            get dead() {
                return this.fromLeft ? this.x > txW + 200 : this.x < -200;
            }
            draw(ctx) {
                if (this.alpha <= 0) return;
                // Glowing trail
                for (let i = 1; i < this.trail.length; i++) {
                    const t  = i / this.trail.length;
                    const t0 = this.trail[i-1], t1 = this.trail[i];
                    ctx.beginPath();
                    ctx.moveTo(t0.x, t0.y);
                    ctx.lineTo(t1.x, t1.y);
                    ctx.strokeStyle = this.glowColor.replace('0.15', (t * 0.25 * this.alpha).toFixed(3));
                    ctx.lineWidth   = t * this.size * 0.7;
                    ctx.lineCap     = 'round';
                    ctx.stroke();
                }
                // Sharp inner trail
                for (let i = Math.floor(this.trail.length * 0.6); i < this.trail.length - 1; i++) {
                    const t  = (i - this.trail.length * 0.6) / (this.trail.length * 0.4);
                    const t0 = this.trail[i], t1 = this.trail[i+1];
                    ctx.beginPath();
                    ctx.moveTo(t0.x, t0.y);
                    ctx.lineTo(t1.x, t1.y);
                    ctx.strokeStyle = `rgba(255,255,255,${(t * 0.4 * this.alpha).toFixed(3)})`;
                    ctx.lineWidth   = t * 2;
                    ctx.stroke();
                }
                // Rock body
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rot);
                ctx.beginPath();
                this.verts.forEach(([vx, vy], i) => i === 0 ? ctx.moveTo(vx, vy) : ctx.lineTo(vx, vy));
                ctx.closePath();
                ctx.fillStyle   = this.fillColor;
                ctx.strokeStyle = this.strokeColor;
                ctx.lineWidth   = 1.5;
                ctx.fill();
                ctx.stroke();
                // Rim highlight
                ctx.beginPath();
                this.verts.slice(0, Math.ceil(this.verts.length / 2)).forEach(([vx, vy], i) =>
                    i === 0 ? ctx.moveTo(vx * 0.7, vy * 0.7) : ctx.lineTo(vx * 0.7, vy * 0.7)
                );
                ctx.strokeStyle = `rgba(255,255,255,0.15)`;
                ctx.lineWidth = 1;
                ctx.stroke();
                ctx.restore();
            }
        }

        // ---------- ANIMATION STATE ----------
        let txGas     = [];
        let txRocks   = [];
        let txRunning = false;
        let txRafId   = null;
        let txPal     = PALETTES.cyan;
        let txEndTime = 0;

        function txSpawnBurst(pal) {
            txPal = pal;
            // Stagger gas cloud creation
            const gasCount = 18 + Math.floor(Math.random() * 10);
            for (let i = 0; i < gasCount; i++) {
                setTimeout(() => txGas.push(new GasCloud(pal)), i * 40);
            }
            // Stagger meteoroid creation across the full duration
            const rockCount = 12 + Math.floor(Math.random() * 8);
            for (let i = 0; i < rockCount; i++) {
                setTimeout(() => txRocks.push(new Meteoroid(pal)), i * 100 + Math.random() * 80);
            }
        }

        function txTick(now) {
            txCtx.clearRect(0, 0, txW, txH);

            // Additive blending for glow gases
            txCtx.globalCompositeOperation = 'screen';
            txGas = txGas.filter(g => { g.update(); g.draw(txCtx); return !g.dead; });

            // Normal blending for rocks
            txCtx.globalCompositeOperation = 'source-over';
            txRocks = txRocks.filter(r => { r.update(); r.draw(txCtx); return !r.dead; });

            const stillRunning = now < txEndTime || txGas.length > 0 || txRocks.length > 0;
            if (stillRunning) {
                txRafId = requestAnimationFrame(txTick);
            } else {
                txCtx.clearRect(0, 0, txW, txH);
                txCanvas.classList.remove('active');
                txRunning = false;
            }
        }

        // ---------- TRANSITION COLOURS ON CARD ----------
        const CARD_COLORS = {
            cyan:   { label: '#fff', sub: '#00f2ff',  tag: 'rgba(0,242,255,0.7)',  alertBorder: '#00f2ff',  alertText: '#00f2ff'  },
            green:  { label: '#fff', sub: '#00ffaa',  tag: 'rgba(0,255,170,0.7)',  alertBorder: '#00ffaa',  alertText: '#00ffaa'  },
            gold:   { label: '#fff', sub: '#ffc820',  tag: 'rgba(255,200,32,0.7)', alertBorder: '#ffc820',  alertText: '#ffc820'  },
            violet: { label: '#fff', sub: '#c060ff',  tag: 'rgba(180,80,255,0.7)', alertBorder: '#c060ff',  alertText: '#c060ff'  },
            fire:   { label: '#ff4500', sub: '#ff6020', tag: 'rgba(255,80,0,0.7)', alertBorder: '#ff4500',  alertText: '#ff4500'  },
        };

        // ---------- MAIN FIRE FUNCTION ----------
        let transitionCooldown = false;

        function fireSectorTransition(boundary) {
            if (transitionCooldown) return;
            transitionCooldown = true;

            const pal     = PALETTES[boundary.palette] || PALETTES.cyan;
            const colors  = CARD_COLORS[boundary.palette] || CARD_COLORS.cyan;
            const txEl    = document.getElementById('sector-transition');
            const alertEl = document.getElementById('sector-alert');
            const tcLabel = document.getElementById('tc-label');
            const tcSub   = document.getElementById('tc-sub');
            const tcTag   = document.getElementById('tc-tag');

            // Style sector card
            tcLabel.innerHTML    = boundary.label.replace('\n', '<br>');
            tcLabel.style.color  = colors.label;
            tcLabel.style.textShadow = `0 0 60px rgba(${pal.glow.join(',')},0.5), 0 0 120px rgba(${pal.glow.join(',')},0.2)`;
            tcSub.textContent    = boundary.sub;
            tcSub.style.color    = colors.sub;
            tcTag.textContent    = boundary.tag;
            tcTag.style.color    = colors.tag;
            alertEl.textContent  = 'â–¸ ' + boundary.sub;
            alertEl.style.borderTopColor = colors.alertBorder;
            alertEl.style.color          = colors.alertText;

            // Start canvas
            if (txRafId) cancelAnimationFrame(txRafId);
            txGas = []; txRocks = [];
            txCanvas.classList.add('active');
            txEndTime = performance.now() + 2200;
            txSpawnBurst(pal);
            txRunning = true;
            txRafId = requestAnimationFrame(txTick);

            // Show name card
            txEl.classList.remove('fire', 'fadeout');
            requestAnimationFrame(() => requestAnimationFrame(() => {
                txEl.classList.add('fire');
                alertEl.classList.remove('show');
                void alertEl.offsetWidth;
                alertEl.classList.add('show');
            }));

            // Fade out card after 1.4s
            setTimeout(() => {
                txEl.classList.add('fadeout');
            }, 1400);

            // Full cleanup at 2.4s
            setTimeout(() => {
                txEl.classList.remove('fire', 'fadeout');
                alertEl.classList.remove('show');
                transitionCooldown = false;
            }, 2500);
        }

        // ---- END SECTOR TRANSITION ENGINE ----

        let lastSectorPct = -1;

        function getSectorIndex(p) {
            if (p < 0.15) return 0;
            if (p < 0.35) return 1;
            if (p < 0.55) return 2;
            if (p < 0.75) return 3;
            if (p < 0.95) return 4;
            return 5;
        }

        function handleInput(x, y) {
            mouse.x = (x / window.innerWidth) * 2 - 1;
            mouse.y = -(y / window.innerHeight) * 2 + 1;
            const hud = document.getElementById('cursor-hud');
            gsap.to(hud, {left: x, top: y, duration: 0.08});
            document.getElementById('cursor-xy').innerText = `X: ${String(x).padStart(4,'0')} | Y: ${String(y).padStart(4,'0')}`;
        }
        window.addEventListener('mousemove', (e) => handleInput(e.clientX, e.clientY));
        window.addEventListener('scroll', () => {
            if(isLaunched) {
                targetScroll = window.scrollY;
                // Update scroll progress bar
                const maxScroll = document.body.scrollHeight - window.innerHeight;
                const pct = maxScroll > 0 ? (window.scrollY / maxScroll * 100) : 0;
                document.getElementById('scroll-fill').style.height = pct + '%';
                document.getElementById('scroll-pct-display').textContent = Math.round(pct) + '%';
                // Update top bar depth
                document.getElementById('tb-depth').textContent = pct.toFixed(2);
                // Update sector indicator
                const sectorIdx = Math.min(Math.floor(pct / 20), sectorNames.length - 1);
                document.getElementById('sector-name-display').textContent = 'â–¸ ' + sectorNames[sectorIdx];
                document.getElementById('tb-sector-val').textContent = '0' + (sectorIdx + 1);
                // Update side nav
                document.querySelectorAll('.nav-item').forEach((n, i) => {
                    n.classList.toggle('active', i === sectorIdx);
                });

                // ---- SECTOR BOUNDARY CROSSING DETECTION ----
                const normPct = pct / 100;
                const newSector = getSectorIndex(normPct);
                if (newSector !== lastSectorPct && lastSectorPct !== -1) {
                    // Find which boundary we just crossed
                    const direction = newSector > lastSectorPct ? 1 : -1;
                    if (direction === 1) {
                        // Moving forward â€” find the boundary we just passed
                        const crossed = sectorBoundaries.find(b =>
                            b.pct > (lastSectorPct * 0.2) && b.pct <= normPct + 0.05
                        ) || sectorBoundaries[Math.max(0, newSector - 1)];
                        if (crossed) fireSectorTransition(crossed);
                    }
                }
                lastSectorPct = newSector;
                // ---- END CROSSING DETECTION ----
            }
        });

        // NAV CLICK
        window.navTo = (sectorIdx) => {
            const maxScroll = document.body.scrollHeight - window.innerHeight;
            const targetPct = sectorIdx / (sectorNames.length - 1);
            window.scrollTo({ top: targetPct * maxScroll, behavior: 'smooth' });
        };

        // --- AUDIO ---
        let audioCtx, masterGain;
        let isSoundOn = false;
        const soundBtn = document.getElementById('sound-toggle');

        function initAudio() {
            if(audioCtx) return;
            const AC = window.AudioContext || window.webkitAudioContext;
            audioCtx = new AC();
            masterGain = audioCtx.createGain();
            masterGain.connect(audioCtx.destination);
            masterGain.gain.value = 0;
            const osc = audioCtx.createOscillator();
            osc.frequency.value = 55;
            osc.connect(masterGain);
            osc.start();
        }

        function toggleSound() {
            if(!audioCtx) initAudio();
            if(audioCtx.state === 'suspended') audioCtx.resume();
            if(!isSoundOn) {
                masterGain.gain.setTargetAtTime(0.3, audioCtx.currentTime, 1);
                soundBtn.classList.add('active');
                document.getElementById('sound-text').innerText = "SND: ON";
                isSoundOn = true;
            } else {
                masterGain.gain.setTargetAtTime(0, audioCtx.currentTime, 0.5);
                soundBtn.classList.remove('active');
                document.getElementById('sound-text').innerText = "SND: OFF";
                isSoundOn = false;
            }
        }
        soundBtn.addEventListener('click', (e) => { e.stopPropagation(); toggleSound(); });
        
        function playNoise() {
            if(!audioCtx || !isSoundOn) return;
            const b = audioCtx.createBuffer(1, 22050, 44100);
            const d = b.getChannelData(0);
            for(let i=0;i<22050;i++) d[i] = Math.random()*2-1;
            const s = audioCtx.createBufferSource(); s.buffer = b;
            const g = audioCtx.createGain(); g.gain.value = 0.1;
            s.connect(g); g.connect(audioCtx.destination); s.start();
        }

        // --- LOADER ANIMATION ---
        let loaderPct = 0;
        const loaderPctEl = document.getElementById('loader-pct');
        const loaderInterval = setInterval(() => {
            loaderPct = Math.min(loaderPct + Math.random() * 4 + 1, 100);
            loaderPctEl.textContent = Math.floor(loaderPct) + '%';
            if(loaderPct >= 100) {
                clearInterval(loaderInterval);
                setTimeout(() => {
                    document.getElementById('click-prompt').classList.add('show');
                }, 200);
            }
        }, 60);

        // --- LAUNCH & LOOP ---
        window.launchSequence = () => {
            if(isLaunched) return;
            isLaunched = true;
            initAudio();

            const overlay = document.getElementById('loader-overlay');
            overlay.style.transition = 'opacity 1s ease';
            overlay.style.opacity = 0;
            setTimeout(()=> overlay.remove(), 1500);

            // Show UI chrome
            setTimeout(() => {
                document.getElementById('top-bar').classList.add('visible');
                document.getElementById('side-nav').classList.add('visible');
                document.getElementById('scroll-progress').classList.add('visible');
                document.getElementById('bottom-hud').classList.add('visible');
            }, 800);

            gsap.to(playerShip.rotation, { x: -Math.PI / 4, duration: 1, ease: "power2.inOut" });
            gsap.to(playerShip.position, { z: -300, y: 30, duration: 3, ease: "power3.in" });
            
            gsap.to(warpMat, { opacity: 1, duration: 1, onComplete: () => {
                gsap.to(warpMat, { opacity: 0, delay: 1, duration: 1 });
            }});

            const starSpeed = { val: 0 };
            gsap.to(starSpeed, { val: 15, duration: 2.5, ease: "power2.in", onUpdate: () => {
                starField.scale.z = 1 + starSpeed.val;
            }, onComplete: () => {
                playerShip.visible = false;
                document.getElementById('main-content').classList.add('visible');
                if(robot) robot.visible = true;
                lastSectorPct = 0; // start tracking from sector 0
                gsap.to(starField.scale, { z: 1, duration: 1 });
            }});
        };

        window.warpBack = () => {
            if(!isLoopReady) return;
            isLoopReady = false; 
            gsap.to(playerShip.rotation, { x: -Math.PI / 4, duration: 1, ease: "power2.inOut" });
            gsap.to(playerShip.position, { z: -300, y: 30, duration: 2, ease: "power2.in" });
            gsap.to(warpMat, { opacity: 1, duration: 0.5 }); 
            const starSpeed = { val: 0 };
            gsap.to(starSpeed, { val: 20, duration: 2, ease: "power2.in", onUpdate: () => {
                starField.scale.z = 1 + starSpeed.val;
            }, onComplete: () => {
                window.scrollTo(0, 0);
                targetScroll = 0; currentScroll = 0;
                lastSectorPct = 0;
                playerShip.visible = false;
                gsap.to(warpMat, { opacity: 0, duration: 1 }); 
                gsap.to(starField.scale, { z: 1, duration: 1 });
            }});
        };

        window.addEventListener('click', () => {
            const scrollPercent = window.scrollY / (document.body.scrollHeight - window.innerHeight);
            if(scrollPercent > 0.75 && scrollPercent < 0.95 && hoveredObj && hoveredObj.userData.type === 'ufo') {
                window.open(hoveredObj.userData.url, '_blank');
            }
            if(isLoopReady && isHoveredEndShip) warpBack();
        });

        window.closeBrief = () => {
            document.getElementById('skill-modal').classList.remove('active');
            if(hoveredObj && hoveredObj.userData.type === 'skill') {
                gsap.to(hoveredObj.children[1].scale, {x:1.1,y:1.1,z:1.1});
                gsap.to(hoveredObj.children[1].material, {opacity:0.1});
                gsap.to(hoveredObj.children[0].scale, {x:1, y:1, z:1});
                hoveredObj = null;
            }
        };

        function animate() {
            requestAnimationFrame(animate);
            const delta = clock.getDelta();
            const time = Date.now() * 0.001;
            if(mixer) mixer.update(delta);

            if(robot && head) {
                const targetX = THREE.MathUtils.clamp(mouse.y * 0.5, -0.5, 0.5); 
                const targetY = THREE.MathUtils.clamp(mouse.x * 0.5, -0.5, 0.5);
                head.rotation.y = THREE.MathUtils.lerp(head.rotation.y, targetY, 0.1);
                head.rotation.x = THREE.MathUtils.lerp(head.rotation.x, targetX, 0.1);
            }

            if(playerShip && (!isLaunched || isLoopReady)) {
                playerShip.position.y = (isLoopReady ? -2 : -1) + Math.sin(time * 2) * 0.1;
                playerShip.rotation.z = Math.sin(time) * 0.05;
                if(isLoopReady) playerShip.rotation.x = -Math.PI / 8;
            }

            if(warpLines && warpMat.opacity > 0) {
                warpLines.position.z += 4; 
                if(warpLines.position.z > 50) warpLines.position.z = 0;
            }

            if (isLaunched) {
                currentScroll += (targetScroll - currentScroll) * 0.08;
                const maxScroll = document.body.scrollHeight - window.innerHeight;
                const scrollPercent = maxScroll > 0 ? currentScroll / maxScroll : 0;
                const travelDist = scrollPercent * 100; 
                camera.position.z = 5 - travelDist;
                checkInteractions(scrollPercent);
            }

            if(projectGroup) {
                projectGroup.children.forEach(mesh => {
                    if (mesh.userData.originalY !== undefined) {
                        mesh.position.y = mesh.userData.originalY + Math.sin(time * 1.5 + mesh.userData.offset) * 0.3;
                        mesh.rotation.x += 0.002; mesh.rotation.y += 0.003;
                    }
                });
            }
            if(eduGroup) {
                eduGroup.children.forEach(mesh => {
                    if (mesh.userData.originalY !== undefined) {
                        mesh.position.y = mesh.userData.originalY + Math.cos(time * 1.5 + mesh.userData.offset) * 0.3;
                        mesh.rotation.x -= 0.002; mesh.rotation.z += 0.002;
                    }
                });
            }

            if(asteroidGroup) asteroidGroup.children.forEach(a => { if(a !== hoveredObj) { a.rotation.x += 0.002; a.rotation.y += 0.003; } });
            if(ufoGroup) ufoGroup.children.forEach((u, i) => { u.children[0].position.y = 4 + Math.sin(time + i)*0.5; u.children[0].rotation.y += 0.01; });
            rings.forEach((r, i) => r.rotation.z += 0.002 * (i+1));

            if(hoveredObj && hoveredObj.userData.name) updateLabel(hoveredObj, 'lbl-obj', 60, -60);
            if(robot && robot.visible && isHoveredRobot && head) updateLabel(head, 'lbl-head', 60, -50);
            
            if(isLoopReady && playerShip) {
                updateLabel(playerShip, 'lbl-head', 0, -80);
                document.getElementById('lbl-head').style.opacity = 1;
                document.getElementById('lbl-head').innerHTML = "WARP_DRIVE [READY]";
            }

            renderer.render(scene, camera);
        }

        function checkInteractions(p) {
            raycaster.setFromCamera(mouse, camera);
            let locked = false;

            if(robot) {
                if(p < 0.15) {
                    robot.visible = true;
                    robot.position.z = -2 - (p * 50); 
                    const hits = raycaster.intersectObject(robot, true);
                    if(hits.length > 0) {
                        locked = true;
                        isHoveredRobot = true;
                        document.getElementById('lbl-head').style.opacity = 1;
                        showAbout();
                    } else {
                        isHoveredRobot = false;
                        document.getElementById('lbl-head').style.opacity = 0;
                        hideAbout();
                    }
                } else {
                    robot.visible = false;
                    hideAbout();
                }
            }

            if(p > 0.15 && p < 0.35) {
                const hits = raycaster.intersectObjects(projectGroup.children);
                if(hits.length > 0) {
                    locked = true;
                    if(hoveredObj !== hits[0].object) {
                        hoveredObj = hits[0].object;
                        showBrief(hoveredObj.userData.data.name, "PROJECT", hoveredObj.userData.data.desc);
                        showLabel(hoveredObj.userData.data.name);
                    }
                } else if(hoveredObj && hoveredObj.userData.type === 'project') { hoveredObj=null; hideBrief(); hideLabel(); }
            }

            if(p > 0.35 && p < 0.55) {
                const hits = raycaster.intersectObjects(asteroidGroup.children, true);
                if(hits.length > 0) {
                    locked = true;
                    let target = hits[0].object.parent;
                    if(hoveredObj !== target) {
                        if(hoveredObj) window.closeBrief();
                        hoveredObj = target;
                        gsap.to(target.children[1].scale, {x:2.5,y:2.5,z:2.5});
                        gsap.to(target.children[1].material, {opacity:0.8});
                        gsap.to(target.children[0].scale, {x:0.5,y:0.5,z:0.5});
                        playNoise();
                        showBrief(target.userData.data.name, target.userData.data.level, target.userData.data.desc);
                        showLabel(target.userData.data.name);
                    }
                } else if(hoveredObj && hoveredObj.userData.type === 'skill') { window.closeBrief(); hideLabel(); }
            } else if(hoveredObj && hoveredObj.userData.type === 'skill') { window.closeBrief(); hideLabel(); }

            if(p > 0.55 && p < 0.75) {
                const hits = raycaster.intersectObjects(eduGroup.children);
                if(hits.length > 0) {
                    locked = true;
                    if(hoveredObj !== hits[0].object) {
                        hoveredObj = hits[0].object;
                        showBrief(hoveredObj.userData.data.name, "EDUCATION", hoveredObj.userData.data.desc);
                        showLabel(hoveredObj.userData.data.name);
                    }
                } else if(hoveredObj && hoveredObj.userData.type === 'edu') { hoveredObj=null; hideBrief(); hideLabel(); }
            }

            if(p > 0.75 && p < 0.95) {
                const hits = raycaster.intersectObjects(ufoGroup.children, true);
                if(hits.length > 0) {
                    locked = true;
                    let target = hits[0].object.parent;
                    if(hoveredObj !== target) {
                        if(hoveredObj) resetUFO(hoveredObj);
                        hoveredObj = target;
                        gsap.to(target.children[1].material, {opacity:0.6}); 
                        showLabel("UPLINK");
                    }
                } else if(hoveredObj && hoveredObj.userData.type === 'ufo') { resetUFO(hoveredObj); hoveredObj=null; hideLabel(); }
            }

            if(p > 0.95) {
                if(!isLoopReady) {
                    isLoopReady = true;
                    playerShip.visible = true;
                    playerShip.position.set(0, -2, camera.position.z - 8); 
                    playerShip.rotation.set(-Math.PI/8, 0, 0); 
                }
                const hits = raycaster.intersectObjects(playerShip.children, true);
                if(hits.length > 0) { locked = true; isHoveredEndShip = true; } 
                else isHoveredEndShip = false;
            } else if(isLoopReady && !isLaunched) {
                isLoopReady = false; playerShip.visible = false; document.getElementById('lbl-head').style.opacity=0;
            }

            const hud = document.getElementById('cursor-hud');
            if(locked) hud.classList.add('locked'); else hud.classList.remove('locked');
        }

        function resetUFO(grp) { gsap.to(grp.children[1].material, {opacity:0.1}); }
        function showBrief(t, s, d) {
            document.getElementById('modal-title').innerText = t;
            document.getElementById('modal-type-badge').innerText = s;
            document.getElementById('modal-subtitle').innerText = s;
            document.getElementById('modal-desc').innerText = d;
            document.getElementById('skill-modal').classList.add('active');
        }
        function hideBrief() { document.getElementById('skill-modal').classList.remove('active'); }
        function showLabel(name) { document.getElementById('lbl-obj').style.opacity=1; document.getElementById('obj-name').innerText=name; }
        function hideLabel() { document.getElementById('lbl-obj').style.opacity=0; }
        function updateLabel(mesh, id, ox, oy) {
            const v = new THREE.Vector3(); mesh.getWorldPosition(v); v.project(camera);
            const x = (v.x * .5 + .5) * window.innerWidth + ox;
            const y = (-(v.y * .5) + .5) * window.innerHeight + oy;
            const el = document.getElementById(id); if(el) { el.style.left = `${x}px`; el.style.top = `${y}px`; }
        }

        setTimeout(launchSequence, 6000);
        animate();
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
