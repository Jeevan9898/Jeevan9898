<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeevan Yadav | Space Narrative</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/FontLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/geometries/TextGeometry.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Outfit:wght@100;300;400;700;900&family=Share+Tech+Mono&display=swap');

        /* ============================================================
           CSS VARIABLES
        ============================================================ */
        :root {
            --cyan: #00f2ff;
            --cyan-dim: rgba(0, 242, 255, 0.15);
            --cyan-glow: rgba(0, 242, 255, 0.4);
            --orange: #ff4500;
            --gold: #ffd700;
            --bg: #000005;
            --surface: rgba(4, 10, 24, 0.95);
            --text-muted: #667799;
            --mono: 'Share Tech Mono', monospace;
            --display: 'Syncopate', sans-serif;
            --body: 'Outfit', sans-serif;
        }

        /* ============================================================
           RESET & BASE
        ============================================================ */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body, html {
            background: var(--bg); color: white;
            font-family: var(--body);
            overflow-x: hidden; cursor: none;
        }

        /* GRAIN OVERLAY */
        body::before {
            content: '';
            position: fixed; inset: 0; z-index: 9998; pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='1'/%3E%3C/svg%3E");
            opacity: 0.025;
            mix-blend-mode: overlay;
        }

        /* SCANLINES */
        body::after {
            content: '';
            position: fixed; inset: 0; z-index: 9997; pointer-events: none;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0, 242, 255, 0.01) 2px,
                rgba(0, 242, 255, 0.01) 4px
            );
        }

        #canvas-container {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100vh;
            z-index: 1; pointer-events: none;
        }

        /* ============================================================
           CUSTOM CURSOR
        ============================================================ */
        #cursor-hud {
            position: fixed; top: 0; left: 0;
            pointer-events: none; z-index: 9999;
            transform: translate(-50%, -50%);
        }
        .crosshair-outer {
            width: 44px; height: 44px;
            border: 1px solid rgba(0, 242, 255, 0.4);
            border-radius: 50%; position: relative;
            display: flex; justify-content: center; align-items: center;
            transition: all 0.15s ease-out;
            animation: cursor-pulse 3s ease-in-out infinite;
        }
        @keyframes cursor-pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0,242,255,0.3); }
            50% { box-shadow: 0 0 0 6px rgba(0,242,255,0); }
        }
        .crosshair-inner {
            width: 4px; height: 4px; border-radius: 50%;
            background: var(--cyan); position: absolute;
        }
        .crosshair-outer::before, .crosshair-outer::after {
            content: ''; position: absolute; background: var(--cyan);
            transition: background 0.2s;
        }
        .crosshair-outer::before { width: 10px; height: 1px; left: -14px; }
        .crosshair-outer::after { width: 1px; height: 10px; top: -14px; }

        /* Corner ticks */
        .c-tick {
            position: absolute; width: 6px; height: 6px;
            border-color: var(--cyan); border-style: solid; opacity: 0.6;
        }
        .c-tick.tl { top: 3px; left: 3px; border-width: 1px 0 0 1px; }
        .c-tick.tr { top: 3px; right: 3px; border-width: 1px 1px 0 0; }
        .c-tick.bl { bottom: 3px; left: 3px; border-width: 0 0 1px 1px; }
        .c-tick.br { bottom: 3px; right: 3px; border-width: 0 1px 1px 0; }

        .cursor-data {
            position: absolute; top: 30px; left: 30px;
            font-family: var(--mono); font-size: 0.55rem;
            color: var(--cyan); white-space: nowrap;
            opacity: 0.7; letter-spacing: 1px;
        }
        /* Locked state */
        .locked .crosshair-outer {
            border-color: var(--orange); animation: none;
            box-shadow: 0 0 12px rgba(255,69,0,0.4);
        }
        .locked .crosshair-inner { background: var(--orange); }
        .locked .crosshair-outer::before,
        .locked .crosshair-outer::after { background: var(--orange); }
        .locked .c-tick { border-color: var(--orange); }
        .locked .cursor-data { color: var(--orange); }

        /* ============================================================
           TOP STATUS BAR
        ============================================================ */
        #top-bar {
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            height: 36px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 24px;
            background: linear-gradient(180deg, rgba(0,10,20,0.9) 0%, transparent 100%);
            border-bottom: 1px solid rgba(0,242,255,0.08);
            pointer-events: none;
            opacity: 0; transition: opacity 1s ease;
        }
        #top-bar.visible { opacity: 1; }
        .top-bar-left, .top-bar-right {
            display: flex; align-items: center; gap: 20px;
        }
        .tb-item {
            font-family: var(--mono); font-size: 0.55rem;
            color: var(--text-muted); letter-spacing: 2px;
            display: flex; align-items: center; gap: 6px;
        }
        .tb-dot {
            width: 5px; height: 5px; border-radius: 50%;
            background: var(--cyan); animation: dot-blink 2s infinite;
        }
        @keyframes dot-blink { 0%,100%{opacity:1;} 50%{opacity:0.2;} }
        .tb-dot.orange { background: var(--orange); }
        .tb-item span { color: var(--cyan); }

        /* ============================================================
           SIDE NAVIGATION
        ============================================================ */
        #side-nav {
            position: fixed; right: 28px; top: 50%;
            transform: translateY(-50%);
            z-index: 1000; display: flex; flex-direction: column;
            align-items: flex-end; gap: 28px;
            opacity: 0; transition: opacity 1s ease;
            pointer-events: none;
        }
        #side-nav.visible { opacity: 1; pointer-events: auto; }
        .nav-item {
            display: flex; align-items: center; gap: 10px;
            cursor: pointer; position: relative;
        }
        .nav-label {
            font-family: var(--mono); font-size: 0.5rem;
            color: var(--text-muted); letter-spacing: 3px;
            text-transform: uppercase; opacity: 0;
            transform: translateX(10px);
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        .nav-item:hover .nav-label,
        .nav-item.active .nav-label {
            opacity: 1; transform: translateX(0); color: var(--cyan);
        }
        .nav-dot {
            width: 6px; height: 6px; border-radius: 50%;
            border: 1px solid var(--text-muted);
            transition: all 0.3s ease; flex-shrink: 0;
        }
        .nav-item:hover .nav-dot,
        .nav-item.active .nav-dot {
            background: var(--cyan); border-color: var(--cyan);
            box-shadow: 0 0 8px var(--cyan);
            transform: scale(1.4);
        }
        .nav-line {
            position: absolute; right: 2px; width: 1px;
            background: rgba(0,242,255,0.2);
            top: 50%; transform-origin: top;
        }

        /* ============================================================
           SCROLL PROGRESS
        ============================================================ */
        #scroll-progress {
            position: fixed; right: 0; top: 0; bottom: 0;
            width: 2px; z-index: 999; pointer-events: none;
            background: rgba(0,242,255,0.05);
            opacity: 0; transition: opacity 1s;
        }
        #scroll-progress.visible { opacity: 1; }
        #scroll-fill {
            width: 100%; background: var(--cyan);
            box-shadow: 0 0 8px var(--cyan);
            transition: height 0.1s linear;
            position: relative;
        }
        #scroll-fill::after {
            content: '';
            position: absolute; bottom: -4px; left: 50%;
            transform: translateX(-50%);
            width: 6px; height: 6px; border-radius: 50%;
            background: var(--cyan); box-shadow: 0 0 10px var(--cyan);
        }

        /* ============================================================
           BOTTOM HUD BAR
        ============================================================ */
        #bottom-hud {
            position: fixed; bottom: 0; left: 0; right: 0;
            z-index: 1000; height: 40px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px;
            background: linear-gradient(0deg, rgba(0,10,20,0.95) 0%, transparent 100%);
            border-top: 1px solid rgba(0,242,255,0.08);
            pointer-events: none;
            opacity: 0; transition: opacity 1s ease;
        }
        #bottom-hud.visible { opacity: 1; }
        #bottom-hud .tb-item { pointer-events: auto; }
        .hud-sector-indicator {
            font-family: var(--mono); font-size: 0.6rem;
            color: var(--cyan); letter-spacing: 3px;
        }
        .hud-divider {
            width: 1px; height: 16px;
            background: rgba(0,242,255,0.2);
        }

        /* ============================================================
           SOUND BUTTON â€” UPGRADED
        ============================================================ */
        .sound-btn {
            position: fixed; bottom: 50px; left: 24px; z-index: 9999;
            color: var(--text-muted); font-family: var(--mono); font-size: 0.6rem;
            cursor: pointer; pointer-events: auto;
            display: flex; align-items: center; gap: 10px;
            transition: all 0.3s;
            padding: 8px 16px;
            background: rgba(0,10,20,0.8);
            border: 1px solid rgba(0,242,255,0.15);
            letter-spacing: 2px;
            clip-path: polygon(8px 0%, 100% 0%, calc(100% - 8px) 100%, 0% 100%);
        }
        .sound-btn:hover, .sound-btn.active {
            color: var(--cyan); border-color: var(--cyan);
            box-shadow: 0 0 20px rgba(0,242,255,0.1), inset 0 0 20px rgba(0,242,255,0.03);
        }
        .sound-waves {
            display: flex; align-items: center; gap: 2px; height: 14px;
        }
        .sound-waves span {
            display: block; width: 2px; background: currentColor;
            border-radius: 1px; transition: height 0.2s ease;
        }
        .sound-waves span:nth-child(1) { height: 4px; }
        .sound-waves span:nth-child(2) { height: 8px; animation: wave 0.8s ease-in-out infinite 0.1s; }
        .sound-waves span:nth-child(3) { height: 12px; animation: wave 0.8s ease-in-out infinite 0.2s; }
        .sound-waves span:nth-child(4) { height: 8px; animation: wave 0.8s ease-in-out infinite 0.3s; }
        .sound-waves span:nth-child(5) { height: 4px; animation: wave 0.8s ease-in-out infinite 0.4s; }
        .sound-btn:not(.active) .sound-waves span { animation: none !important; height: 2px !important; }
        @keyframes wave {
            0%, 100% { transform: scaleY(0.5); }
            50% { transform: scaleY(1.5); }
        }

        /* ============================================================
           SKILL / PROJECT MODAL â€” UPGRADED
        ============================================================ */
        #skill-modal {
            position: fixed; inset: 0; z-index: 5000;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
            background: rgba(0,5,15,0.4); backdrop-filter: blur(2px);
        }
        #skill-modal.active { opacity: 1; pointer-events: auto; }

        .modal-content {
            background: var(--surface);
            border: 1px solid rgba(0,242,255,0.35);
            padding: 0;
            width: 70%; max-width: 520px;
            position: relative;
            box-shadow: 0 0 60px rgba(0,242,255,0.08), 0 0 120px rgba(0,242,255,0.04);
            overflow: hidden;
        }
        /* Animated top bar */
        .modal-content::before {
            content: '';
            display: block; height: 2px; width: 100%;
            background: linear-gradient(90deg, transparent, var(--cyan), transparent);
            animation: modal-scan 2s linear infinite;
        }
        @keyframes modal-scan {
            0% { background-position: -100% 0; }
            100% { background-position: 200% 0; }
        }
        .modal-header {
            padding: 22px 30px 16px;
            border-bottom: 1px solid rgba(0,242,255,0.1);
            display: flex; align-items: flex-start; justify-content: space-between;
            background: rgba(0,242,255,0.02);
        }
        .modal-header-left { flex: 1; }
        #modal-type-badge {
            font-family: var(--mono); font-size: 0.5rem;
            color: var(--cyan); letter-spacing: 4px;
            margin-bottom: 8px; display: block;
            opacity: 0.7;
        }
        #modal-title {
            font-family: var(--display); color: #fff;
            font-size: 1.4rem; margin: 0;
            text-transform: uppercase; line-height: 1.1;
        }
        #modal-subtitle {
            font-family: var(--mono); color: var(--cyan);
            font-size: 0.7rem; margin: 0; display: block;
        }
        .modal-body { padding: 22px 30px 26px; }
        #modal-desc {
            font-family: var(--body); color: #bbc; font-size: 0.95rem; line-height: 1.65;
        }

        /* Corner brackets */
        .modal-corner {
            position: absolute; width: 12px; height: 12px;
            border-color: var(--cyan); border-style: solid;
        }
        .modal-corner.tl { top: 0; left: 0; border-width: 1px 0 0 1px; }
        .modal-corner.tr { top: 0; right: 0; border-width: 1px 1px 0 0; }
        .modal-corner.bl { bottom: 0; left: 0; border-width: 0 0 1px 1px; }
        .modal-corner.br { bottom: 0; right: 0; border-width: 0 1px 1px 0; }

        /* ============================================================
           ABOUT ME MODAL â€” UPGRADED
        ============================================================ */
        #about-modal {
            position: fixed;
            top: 50%; left: 5%;
            transform: translateY(-50%) translateX(-30px);
            z-index: 6000;
            opacity: 0; pointer-events: none;
            transition: opacity 0.4s ease, transform 0.4s ease;
            width: 480px; max-width: 90vw;
        }
        #about-modal.active {
            opacity: 1; pointer-events: auto;
            transform: translateY(-50%) translateX(0);
        }
        .about-panel {
            background: var(--surface);
            border: 1px solid rgba(0,242,255,0.4);
            border-left: 3px solid var(--cyan);
            padding: 0; position: relative; overflow: hidden;
            box-shadow: 0 0 60px rgba(0,242,255,0.1), -20px 0 60px rgba(0,242,255,0.05);
        }
        .about-scan {
            position: absolute; left: 0; right: 0; top: 0;
            height: 1px; background: linear-gradient(90deg, var(--cyan), transparent);
            animation: about-scan-line 3s linear infinite; pointer-events: none; z-index: 1;
        }
        @keyframes about-scan-line {
            0% { top: 0; opacity: 1; }
            80% { opacity: 0.5; }
            100% { top: 100%; opacity: 0; }
        }
        .about-header {
            padding: 24px 28px 18px;
            border-bottom: 1px solid rgba(0,242,255,0.12);
            background: rgba(0,242,255,0.025);
            position: relative;
        }
        .about-tag {
            font-family: var(--mono); font-size: 0.52rem;
            color: var(--cyan); letter-spacing: 4px;
            margin-bottom: 12px; display: flex; align-items: center; gap: 10px;
        }
        .about-tag::before {
            content: ''; display: inline-block;
            width: 16px; height: 1px; background: var(--cyan);
        }
        .about-name {
            font-family: var(--display);
            font-size: 1.5rem; color: #fff;
            text-transform: uppercase; margin: 0 0 4px 0;
        }
        .about-role {
            font-family: var(--body);
            font-size: 0.8rem; color: var(--cyan);
            font-weight: 300; letter-spacing: 1.5px;
        }
        /* Status badges */
        .about-badges {
            display: flex; gap: 8px; margin-top: 12px; flex-wrap: wrap;
        }
        .about-badge {
            font-family: var(--mono); font-size: 0.48rem;
            color: var(--text-muted); letter-spacing: 2px;
            padding: 4px 8px;
            border: 1px solid rgba(0,242,255,0.15);
            background: rgba(0,242,255,0.04);
        }
        .about-body-section {
            padding: 20px 28px 24px;
        }
        .about-body {
            font-family: var(--body); font-size: 0.86rem;
            color: #99aabb; line-height: 1.8; font-weight: 300;
        }
        .about-body p { margin: 0 0 10px 0; }
        .about-body p:last-child { margin: 0; }
        .about-hl { color: #dde; font-weight: 400; }
        .about-footer {
            margin-top: 14px; padding-top: 12px;
            border-top: 1px solid rgba(0,242,255,0.12);
            font-family: var(--mono); font-size: 0.75rem; color: var(--cyan);
            letter-spacing: 1px;
        }
        .about-panel::after {
            content: '';
            position: absolute; top: -1px; right: -1px;
            width: 20px; height: 20px;
            border-top: 2px solid var(--cyan);
            border-right: 2px solid var(--cyan);
        }

        /* ============================================================
           LOADER â€” CINEMATIC UPGRADE
        ============================================================ */
        /* ============================================================
           PIXEL INTRO  (igloo.inc â€” pixels crystallise into name)
        ============================================================ */
        #pixel-canvas {
            position: fixed; inset: 0; z-index: 10001;
            pointer-events: none; width: 100%; height: 100%;
        }
        #loader-overlay {
            position: fixed; inset: 0; background: #000008;
            z-index: 10000; cursor: pointer; overflow: hidden;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            gap: clamp(10px,2vh,20px);
        }
        #intro-name {
            font-family: var(--display);
            font-size: clamp(3rem, 9vw, 8rem);
            font-weight: 700; letter-spacing: clamp(6px,2vw,22px);
            text-transform: uppercase; text-align: center; line-height: 0.88;
            color: #fff; position: relative; z-index: 10003;
            opacity: 0; transform: translateY(14px);
            transition: opacity 1.4s ease, transform 1.4s cubic-bezier(0.16,1,0.3,1);
        }
        #intro-name.show { opacity: 1; transform: translateY(0); }
        #intro-name .n2  {
            display: block; color: transparent;
            -webkit-text-stroke: 1px rgba(255,255,255,0.45);
        }
        #intro-roles {
            display: flex; flex-wrap: wrap; justify-content: center;
            gap: 8px; z-index: 10003; position: relative;
            opacity: 0; transform: translateY(8px);
            transition: opacity 0.9s ease 0.3s, transform 0.9s ease 0.3s;
        }
        #intro-roles.show { opacity: 1; transform: translateY(0); }
        .role-chip {
            font-family: var(--mono); font-size: clamp(0.5rem,1.2vw,0.65rem);
            color: var(--cyan); letter-spacing: 3px;
            border: 1px solid rgba(0,242,255,0.22); padding: 5px 14px;
            clip-path: polygon(7px 0%,100% 0%,calc(100% - 7px) 100%,0% 100%);
        }
        #intro-hint {
            position: absolute; bottom: clamp(14px,4vh,36px);
            font-family: var(--mono); font-size: clamp(0.48rem,1vw,0.58rem);
            color: rgba(0,242,255,0.3); letter-spacing: 5px; text-transform: uppercase;
            opacity: 0; animation: hint-pulse 1.8s ease-in-out infinite;
            z-index: 10003; transition: opacity 0.8s ease;
        }
        #intro-hint.show { opacity: 1; }
        @keyframes hint-pulse { 0%,100%{opacity:0.2;} 50%{opacity:0.8;} }
        #loader-log {
            position: absolute; bottom: clamp(48px,10vh,80px); left: clamp(16px,5vw,56px);
            font-family: var(--mono); font-size: clamp(0.45rem,0.9vw,0.55rem);
            color: var(--text-muted); letter-spacing: 1px; line-height: 1.9;
            border-left: 1px solid rgba(0,242,255,0.12); padding-left: 12px;
            z-index: 10003;
        }
        .log-line { opacity:0; animation: log-appear 0.25s ease forwards; }
        .log-line.ok::before   { content:'[OK] ';   color:#00ff88; }
        .log-line.info::before { content:'[INFO] '; color:var(--cyan); }
        .log-line.warn::before { content:'[WARN] '; color:var(--gold); }
        @keyframes log-appear { to{opacity:1;} }
        #intro-bar { position:absolute; bottom:0; left:0; right:0; height:1px;
            background:rgba(0,242,255,0.05); z-index:10003; }
        #intro-bar-fill { height:100%; width:0%;
            background:linear-gradient(90deg,transparent,var(--cyan),rgba(0,242,255,0.3));
            box-shadow:0 0 6px var(--cyan); transition:width 0.12s linear; }
        .loader-corner {
            position:absolute; width:clamp(20px,3.2vw,38px); height:clamp(20px,3.2vw,38px);
            border-color:rgba(0,242,255,0.18); border-style:solid;
        }
        .loader-corner.tl{top:18px;left:18px;border-width:1px 0 0 1px;}
        .loader-corner.tr{top:18px;right:18px;border-width:1px 1px 0 0;}
        .loader-corner.bl{bottom:18px;left:18px;border-width:0 0 1px 1px;}
        .loader-corner.br{bottom:18px;right:18px;border-width:0 1px 1px 0;}
        #loader-grid {
            position:absolute; inset:0; pointer-events:none;
            background-image:
                linear-gradient(rgba(0,242,255,0.025) 1px,transparent 1px),
                linear-gradient(90deg,rgba(0,242,255,0.025) 1px,transparent 1px);
            background-size:clamp(28px,4.5vw,54px) clamp(28px,4.5vw,54px);
            mask-image:radial-gradient(ellipse 72% 72% at 50% 50%,black 30%,transparent 100%);
        }
        /* ============================================================
           IGLOO-STYLE LAYOUT SYSTEM
        ============================================================ */

        /* -- Layout content wrapper -- */
        .content-layer {
            position: relative; z-index: 5;
            opacity: 0;
            transition: opacity 1.2s ease;
        }
        .content-layer.visible { opacity: 1; }

        /* -- Scroll snap container -- */
        .snap-container {
            height: 100dvh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            scroll-behavior: smooth;
        }

        /* -- Each section: full viewport, snaps -- */
        section {
            height: 100dvh;
            min-height: 560px;
            scroll-snap-align: start;
            scroll-snap-stop: always;
            display: grid;
            grid-template-columns: 1fr var(--watermark-col, 120px);
            grid-template-rows: 1fr;
            padding: 0;
            position: relative;
            overflow: hidden;
            pointer-events: none;
        }

        /* Left vertical accent line */
        section::after {
            content: '';
            position: absolute;
            left: var(--sec-pad-x);
            top: 12%; bottom: 12%;
            width: 1px;
            background: linear-gradient(180deg,
                transparent 0%,
                rgba(0,242,255,0.18) 30%,
                rgba(0,242,255,0.18) 70%,
                transparent 100%
            );
        }

        /* -- Section inner: the actual content -- */
        .section-inner {
            grid-column: 1;
            grid-row: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0 var(--sec-pad-x);
            position: relative;
            z-index: 2;
        }

        /* -- Stagger reveal system -- */
        .reveal-item {
            opacity: 0;
            transform: translateY(28px);
            transition: opacity 0.7s ease, transform 0.8s cubic-bezier(0.16,1,0.3,1);
        }
        .reveal-item.delay-1 { transition-delay: 0.08s; }
        .reveal-item.delay-2 { transition-delay: 0.18s; }
        .reveal-item.delay-3 { transition-delay: 0.32s; }
        .reveal-item.delay-4 { transition-delay: 0.48s; }
        .reveal-item.delay-5 { transition-delay: 0.62s; }
        section.in-view .reveal-item { opacity: 1; transform: translateY(0); }

        /* -- Section number tag -- */
        .sec-eyebrow {
            font-family: var(--mono);
            font-size: clamp(0.55rem, 1.2vw, 0.7rem);
            color: var(--cyan); letter-spacing: 5px;
            display: flex; align-items: center; gap: 12px;
            margin-bottom: clamp(14px, 2.5vh, 22px);
            text-transform: uppercase;
        }
        .sec-eyebrow-line {
            display: block;
            width: clamp(20px, 3vw, 36px); height: 1px;
            background: var(--cyan); flex-shrink: 0;
        }
        .sec-eyebrow-num {
            font-size: clamp(0.48rem, 1vw, 0.58rem);
            color: rgba(0,242,255,0.35);
            letter-spacing: 2px; margin-left: auto;
        }

        /* -- Main heading -- */
        .sec-heading {
            font-family: var(--display);
            font-size: clamp(2.8rem, 7.5vw, 7rem);
            font-weight: 700; margin: 0;
            line-height: 0.86; text-transform: uppercase;
            position: relative; letter-spacing: -0.5px;
        }
        /* Ghost echo */
        .sec-heading::after {
            content: attr(data-text);
            position: absolute; inset: 0;
            color: transparent;
            -webkit-text-stroke: 1px rgba(0,242,255,0.06);
            transform: translate(5px, 5px);
            pointer-events: none; user-select: none;
            white-space: pre;
        }

        /* -- Horizontal rule -- */
        .sec-rule {
            height: 1px; width: 0;
            background: linear-gradient(90deg, var(--cyan), transparent);
            margin: clamp(14px, 2.5vh, 22px) 0;
            transition: width 1.1s cubic-bezier(0.4,0,0.2,1) 0.3s;
        }
        section.in-view .sec-rule { width: clamp(80px, 20vw, 240px); }

        /* -- Lead paragraph -- */
        .sec-lead {
            font-family: var(--body);
            font-size: clamp(0.88rem, 1.6vw, 1.05rem);
            color: #7a8ea8; line-height: 1.75;
            font-weight: 300;
            max-width: 460px;
        }

        /* -- Big background watermark number -- */
        .sec-watermark {
            grid-column: 2; grid-row: 1;
            display: flex; align-items: center;
            font-family: var(--display);
            font-size: clamp(5rem, 14vw, 12rem);
            color: transparent;
            -webkit-text-stroke: 1px rgba(0,242,255,0.05);
            font-weight: 700; line-height: 1;
            letter-spacing: -6px;
            user-select: none; pointer-events: none;
            padding-right: 8px;
            opacity: 0;
            transition: opacity 0.8s ease 0.5s;
        }
        section.in-view .sec-watermark { opacity: 1; }

        /* â”€â”€â”€ HERO SECTION (01) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #sec-0 { grid-template-columns: 1fr; }
        #sec-0 .section-inner { padding-top: clamp(80px, 15vh, 140px); }
        #sec-0 .sec-watermark { display: none; }

        .hero-name-block {
            display: flex; flex-direction: column;
            gap: clamp(6px, 1.2vh, 12px);
            margin-bottom: clamp(16px, 3vh, 28px);
        }
        .hero-title {
            font-family: var(--display);
            font-size: clamp(3.2rem, 10vw, 9rem);
            font-weight: 700; line-height: 0.82;
            text-transform: uppercase; letter-spacing: -1px;
            color: #fff;
        }
        .hero-title .line-2 {
            display: block;
            color: transparent;
            -webkit-text-stroke: 1px rgba(255,255,255,0.5);
        }
        .hero-divider {
            display: flex; align-items: center; gap: 16px;
            margin: clamp(12px, 2.5vh, 24px) 0;
        }
        .hero-divider-line {
            flex: 1; height: 1px;
            max-width: 200px;
            background: linear-gradient(90deg, var(--cyan), transparent);
            transform: scaleX(0); transform-origin: left;
            transition: transform 1s cubic-bezier(0.4,0,0.2,1) 0.4s;
        }
        section.in-view .hero-divider-line { transform: scaleX(1); }
        .hero-divider-dot {
            width: 4px; height: 4px; border-radius: 50%;
            background: var(--cyan);
            box-shadow: 0 0 8px var(--cyan);
        }
        .hero-role-row {
            display: flex; flex-wrap: wrap;
            gap: 8px 16px; align-items: center;
        }
        .hero-role-chip {
            font-family: var(--mono);
            font-size: clamp(0.55rem, 1.1vw, 0.68rem);
            color: var(--text-muted); letter-spacing: 3px;
            border: 1px solid rgba(0,242,255,0.18);
            padding: 5px 12px;
            background: rgba(0,242,255,0.03);
            text-transform: uppercase;
            clip-path: polygon(6px 0%, 100% 0%, calc(100% - 6px) 100%, 0% 100%);
        }
        .hero-scroll-hint {
            position: absolute; bottom: clamp(20px, 5vh, 40px);
            left: var(--sec-pad-x);
            display: flex; align-items: center; gap: 10px;
            font-family: var(--mono); font-size: 0.5rem;
            color: rgba(0,242,255,0.3); letter-spacing: 4px;
        }
        .hero-scroll-hint::before {
            content: '';
            display: block; width: 1px;
            height: clamp(24px, 4vh, 40px);
            background: linear-gradient(180deg, var(--cyan), transparent);
            animation: scroll-hint-pulse 2s ease-in-out infinite;
        }
        @keyframes scroll-hint-pulse {
            0%,100% { opacity: 0.3; } 50% { opacity: 0.9; }
        }

        /* â”€â”€â”€ STANDARD SECTION LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .sec-stats-row {
            display: flex; gap: clamp(20px, 5vw, 48px);
            margin-top: clamp(16px, 3.5vh, 32px);
            flex-wrap: wrap;
        }
        .sec-stat {
            display: flex; flex-direction: column; gap: 4px;
        }
        .sec-stat-val {
            font-family: var(--display);
            font-size: clamp(1.4rem, 3vw, 2.2rem);
            color: #fff; line-height: 1;
        }
        .sec-stat-label {
            font-family: var(--mono); font-size: 0.52rem;
            color: var(--text-muted); letter-spacing: 3px;
        }

        /* â”€â”€â”€ SECTOR TRANSITION CARD responsive sizing â”€â”€â”€â”€â”€â”€â”€ */
        .sector-card-tag   { font-size: clamp(0.48rem, 1.5vw, 0.62rem); }
        .sector-card-label { font-size: clamp(2rem, 8vw, 7.5rem); }
        .sector-card-sub   { font-size: clamp(0.5rem, 1.2vw, 0.65rem); letter-spacing: clamp(3px, 1vw, 8px); }

        /* â”€â”€â”€ HUD LABELS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .hud-label {
            position: absolute; color: var(--cyan);
            font-family: var(--mono); font-size: 0.55rem;
            border-left: 2px solid var(--cyan); padding-left: 10px;
            opacity: 0; pointer-events: none;
            transition: opacity 0.3s; white-space: nowrap;
            letter-spacing: 2px;
        }

        /* â”€â”€â”€ ABOUT PANEL sizing tweak â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #about-modal {
            top: 50%; left: clamp(12px, 4vw, 5%);
            transform: translateY(-50%) translateX(-30px);
            width: min(480px, calc(100vw - 24px));
        }
        #about-modal.active {
            transform: translateY(-50%) translateX(0);
        }

        /* ============================================================
           FULL RESPONSIVE SYSTEM
        ============================================================ */

        /* CSS custom properties scaled by viewport */
        :root {
            --sec-pad-x: clamp(24px, 8vw, 10%);
            --watermark-col: clamp(60px, 10vw, 140px);
        }

        /* â”€â”€ WIDE DESKTOP (1440px+) â”€â”€ */
        @media (min-width: 1440px) {
            .sec-heading { font-size: clamp(7rem, 8vw, 10rem); }
            .hero-title   { font-size: clamp(8rem, 10vw, 12rem); }
        }

        /* â”€â”€ LAPTOP / DESKTOP (1024â€“1439px) â”€â”€ */
        @media (min-width: 1024px) and (max-width: 1439px) {
            /* default styles fine */
        }

        /* â”€â”€ TABLET (640â€“1023px) â”€â”€ */
        @media (min-width: 640px) and (max-width: 1023px) {
            :root { --sec-pad-x: clamp(28px, 6vw, 60px); }
            section { grid-template-columns: 1fr 80px; }
            .hero-title { font-size: clamp(3rem, 9vw, 6rem); }
            .sec-heading { font-size: clamp(2.6rem, 7vw, 5rem); }
            .sec-watermark { font-size: clamp(4rem, 12vw, 8rem); }
            #top-bar { display: none; }
            #bottom-hud { padding: 0 12px; }
        }

        /* â”€â”€ MOBILE (< 640px) â”€â”€ */
        @media (max-width: 639px) {
            :root { --sec-pad-x: 20px; --watermark-col: 0px; }

            section {
                grid-template-columns: 1fr;
                height: 100dvh;
                min-height: 500px;
            }
            .sec-watermark { display: none; }
            section::after { left: 16px; }

            .hero-title { font-size: clamp(2.4rem, 11vw, 4.5rem); }
            .hero-title .line-2 { -webkit-text-stroke: 1px rgba(255,255,255,0.35); }
            .sec-heading { font-size: clamp(2.2rem, 10vw, 4rem); line-height: 0.88; }
            .sec-lead { font-size: 0.85rem; }

            #top-bar    { display: none; }
            #side-nav   { display: none; }
            #bottom-hud { height: 44px; padding: 0 12px; }
            #scroll-progress { display: none; }

            .sec-stats-row { gap: 16px; }
            .sec-stat-val  { font-size: clamp(1.2rem, 6vw, 1.8rem); }

            /* Sector transition card */
            .sector-card-label { font-size: clamp(2.2rem, 11vw, 4.5rem); }
            .sector-card-sub   { letter-spacing: 3px; font-size: 0.52rem; }
            #sector-alert { font-size: 0.5rem; letter-spacing: 3px; padding: 6px 14px; }

            /* About modal full-width on mobile */
            #about-modal {
                left: 10px; right: 10px; top: auto;
                bottom: 56px;
                transform: translateY(20px);
                width: auto;
            }
            #about-modal.active {
                transform: translateY(0);
            }
            .about-panel { max-height: 55dvh; overflow-y: auto; }

            /* Modals */
            .modal-content { width: 90%; }

            /* Sound btn */
            .sound-btn { padding: 6px 12px; font-size: 0.55rem; }

            /* HUD cursor â€” hide data on mobile */
            .cursor-data { display: none; }
        }

        /* â”€â”€ VERY SMALL PHONES (< 375px) â”€â”€ */
        @media (max-width: 374px) {
            .hero-title { font-size: 2.2rem; }
            .sec-heading { font-size: 2rem; }
            .sec-eyebrow { font-size: 0.5rem; letter-spacing: 3px; }
        }

        /* â”€â”€ LANDSCAPE MOBILE â”€â”€ */
        @media (max-width: 768px) and (orientation: landscape) {
            section { height: 100dvh; min-height: 360px; }
            .hero-title { font-size: clamp(2rem, 9vh, 5rem); }
            .sec-heading { font-size: clamp(1.8rem, 8vh, 4rem); }
            .hero-scroll-hint { display: none; }
        }

        /* â”€â”€ WINDOWS HIGH-DPI (125%, 150%) â”€â”€ */
        @media (-webkit-min-device-pixel-ratio: 1.25) and (min-width: 1024px) {
            .sec-heading { letter-spacing: -0.5px; }
        }

        /* Disable pointer: never show cursor ring */
        @media (pointer: coarse) {
            #cursor-hud { display: none; }
        }

        /* ============================================================
           SECTOR TRANSITION â€” GAS & METEOROID CANVAS
        ============================================================ */

        /* â”€â”€ GAS+METEOROID CANVAS â”€â”€ */
        #transition-canvas {
            position: fixed; inset: 0; z-index: 8000;
            pointer-events: none; opacity: 0; width: 100%; height: 100%;
            transition: opacity 0.2s;
        }
        #transition-canvas.active { opacity: 1; }
        #transition-backdrop {
            position: fixed; inset: 0; z-index: 8001; pointer-events: none;
            background: radial-gradient(ellipse 110% 110% at 50% 50%,
                rgba(0,0,8,0) 0%, rgba(0,0,8,0.6) 60%, rgba(0,0,8,0.88) 100%);
            opacity: 0; transition: opacity 0.4s ease;
        }
        #transition-backdrop.show { opacity: 1; }
        #transition-backdrop.hide { opacity: 0; transition: opacity 0.7s ease 0.6s; }
        /* Bottom-left card â€” never overlaps section headings */
        #sector-transition {
            position: fixed; inset: 0; z-index: 8002; pointer-events: none;
            padding: 0 clamp(20px,6vw,72px) clamp(28px,7vh,72px);
            display: flex; flex-direction: column; justify-content: flex-end;
        }
        .sector-bg-num {
            position: absolute; right: clamp(-20px,-1vw,10px); bottom: clamp(-30px,-3vh,-50px);
            font-family: var(--display); font-size: clamp(28vw,36vw,48vw);
            font-weight: 700; line-height: 0.78; color: transparent;
            user-select: none; letter-spacing: -12px;
            opacity: 0; transform: translateX(50px);
            transition: opacity 0.55s ease 0.05s, transform 0.7s cubic-bezier(0.16,1,0.3,1) 0.05s;
        }
        #sector-transition.fire    .sector-bg-num { opacity: 1; transform: translateX(0); }
        #sector-transition.fadeout .sector-bg-num { opacity: 0; transform: translateX(-30px); transition-delay: 0s; }
        .sector-rule-line {
            height: 1px; width: 0; margin-bottom: clamp(8px,1.5vh,14px);
            transition: width 0.55s cubic-bezier(0.4,0,0.2,1) 0.08s;
        }
        #sector-transition.fire    .sector-rule-line { width: clamp(50px,12vw,180px); }
        #sector-transition.fadeout .sector-rule-line { width: 0; transition-delay: 0s; }
        .sector-card-tag {
            font-family: var(--mono);
            font-size: clamp(0.46rem,1.1vw,0.58rem); letter-spacing: clamp(4px,0.8vw,8px);
            text-transform: uppercase; margin-bottom: clamp(4px,1vh,10px);
            opacity: 0; transform: translateY(8px);
            transition: opacity 0.35s ease 0.06s, transform 0.45s ease 0.06s;
        }
        #sector-transition.fire    .sector-card-tag { opacity: 0.65; transform: translateY(0); }
        #sector-transition.fadeout .sector-card-tag { opacity: 0; transition-delay: 0s; }
        .sector-card-label {
            font-family: var(--display);
            font-size: clamp(2.8rem,8vw,7.5rem);
            font-weight: 700; line-height: 0.84; text-transform: uppercase;
            letter-spacing: -1px; max-width: 65vw;
            opacity: 0; transform: translateY(28px);
            transition: opacity 0.55s ease 0.14s, transform 0.65s cubic-bezier(0.16,1,0.3,1) 0.14s;
        }
        #sector-transition.fire    .sector-card-label { opacity: 1; transform: translateY(0); }
        #sector-transition.fadeout .sector-card-label { opacity: 0; transform: translateY(-16px); transition-delay: 0s; }
        .sector-card-sub {
            font-family: var(--mono);
            font-size: clamp(0.46rem,1vw,0.6rem); letter-spacing: clamp(3px,0.8vw,7px);
            margin-top: clamp(6px,1.2vh,14px); padding-bottom: clamp(10px,3vh,28px);
            opacity: 0; transform: translateY(6px);
            transition: opacity 0.35s ease 0.26s, transform 0.45s ease 0.26s;
        }
        #sector-transition.fire    .sector-card-sub { opacity: 0.5; transform: translateY(0); }
        #sector-transition.fadeout .sector-card-sub { opacity: 0; transition-delay: 0s; }
        /* Alert strip â€” top left, below HUD bar */
        #sector-alert {
            position: fixed; top: 38px; left: clamp(14px,5vw,72px);
            z-index: 8003; pointer-events: none;
            font-family: var(--mono); font-size: clamp(0.46rem,0.9vw,0.54rem);
            letter-spacing: clamp(3px,0.7vw,5px);
            border-left: 2px solid currentColor;
            padding: 4px 0 4px 10px;
            opacity: 0; transform: translateX(-14px); white-space: nowrap;
        }
        #sector-alert.show { animation: alert-slide-in 2.4s cubic-bezier(0.16,1,0.3,1) forwards; }
        @keyframes alert-slide-in {
            0%  { opacity:0; transform:translateX(-14px); }
            12% { opacity:1; transform:translateX(0); }
            72% { opacity:1; transform:translateX(0); }
            100%{ opacity:0; transform:translateX(-6px); }
        }
      }

    </style>

</head>
<body>

    <!-- ======= CUSTOM CURSOR ======= -->
    <div id="cursor-hud">
        <div class="crosshair-outer">
            <div class="c-tick tl"></div>
            <div class="c-tick tr"></div>
            <div class="c-tick bl"></div>
            <div class="c-tick br"></div>
            <div class="crosshair-inner"></div>
        </div>
        <div class="cursor-data" id="cursor-xy">X: 000 | Y: 000</div>
    </div>

    <!-- ======= TOP STATUS BAR ======= -->
    <div id="top-bar">
        <div class="top-bar-left">
            <div class="tb-item">
                <div class="tb-dot"></div>
                SYS_ONLINE
            </div>
            <div class="tb-item">JY_PORTFOLIO <span>v2.4.1</span></div>
            <div class="tb-item">PILOT: <span>JEEVAN YADAV</span></div>
        </div>
        <div class="top-bar-right">
            <div class="tb-item" id="tb-sector">SECTOR: <span id="tb-sector-val">01</span></div>
            <div class="tb-item">DEPTH: <span id="tb-depth">0.00</span></div>
            <div class="tb-item">
                <div class="tb-dot orange"></div>
                ENGINE ACTIVE
            </div>
        </div>
    </div>

    <!-- ======= SIDE NAVIGATION ======= -->
    <nav id="side-nav">
        <div class="nav-item active" data-sector="0" onclick="navTo(0)">
            <span class="nav-label">INTRO</span>
            <div class="nav-dot"></div>
        </div>
        <div class="nav-item" data-sector="1" onclick="navTo(1)">
            <span class="nav-label">PROJECTS</span>
            <div class="nav-dot"></div>
        </div>
        <div class="nav-item" data-sector="2" onclick="navTo(2)">
            <span class="nav-label">SKILLS</span>
            <div class="nav-dot"></div>
        </div>
        <div class="nav-item" data-sector="3" onclick="navTo(3)">
            <span class="nav-label">EDUCATION</span>
            <div class="nav-dot"></div>
        </div>
        <div class="nav-item" data-sector="4" onclick="navTo(4)">
            <span class="nav-label">CONTACT</span>
            <div class="nav-dot"></div>
        </div>
    </nav>

    <!-- ======= SCROLL PROGRESS ======= -->
    <div id="scroll-progress">
        <div id="scroll-fill" style="height:0%"></div>
    </div>

    <!-- ======= BOTTOM HUD ======= -->
    <div id="bottom-hud">
        <div class="top-bar-left">
            <div class="tb-item hud-sector-indicator" id="sector-name-display">â–¸ SECTOR_01 // INTRODUCTION</div>
        </div>
        <div class="top-bar-right">
            <div class="tb-item">SCROLL: <span id="scroll-pct-display">0%</span></div>
            <div class="hud-divider"></div>
            <div class="sound-btn" id="sound-toggle">
                <div class="sound-waves">
                    <span></span><span></span><span></span><span></span><span></span>
                </div>
                <span id="sound-text">SND: OFF</span>
            </div>
        </div>
    </div>

    <!-- ======= SKILL MODAL â€” UPGRADED ======= -->
    <div id="skill-modal" onclick="closeBrief()">
        <div class="modal-content">
            <div class="modal-corner tl"></div>
            <div class="modal-corner tr"></div>
            <div class="modal-corner bl"></div>
            <div class="modal-corner br"></div>
            <div class="modal-header">
                <div class="modal-header-left">
                    <span id="modal-type-badge">DATA NODE</span>
                    <h1 id="modal-title">DATA</h1>
                </div>
                <span id="modal-subtitle">...</span>
            </div>
            <div class="modal-body">
                <p id="modal-desc">...</p>
            </div>
        </div>
    </div>

    <!-- ======= ABOUT ME PANEL ======= -->
    <div id="about-modal">
        <div class="about-panel">
            <div class="about-scan"></div>
            <div class="about-header">
                <div class="about-tag">PILOT_PROFILE // SECTOR_01</div>
                <h2 class="about-name">Jeevan Yadav</h2>
                <div class="about-role">Full Stack Developer &nbsp;Â·&nbsp; Blockchain &nbsp;Â·&nbsp; Web3</div>
                <div class="about-badges">
                    <span class="about-badge">â—ˆ OPEN TO WORK</span>
                    <span class="about-badge">â—ˆ WEB3 DEV</span>
                    <span class="about-badge">â—ˆ OSS CONTRIBUTOR</span>
                </div>
            </div>
            <div class="about-body-section">
                <div class="about-body">
                    <p>I'm a Full Stack Developer with a strong interest in <span class="about-hl">Blockchain, Web3,</span> and modern web technologies. I enjoy building scalable, user-friendly applications and turning complex ideas into clean, functional digital products.</p>
                    <p>I've worked with <span class="about-hl">JavaScript, React, Node.js, MongoDB, Solidity,</span> and Web3 tools â€” continuously exploring system design, advanced web dev, and decentralized systems.</p>
                    <p>Currently focused on building real-world projects, contributing to open-source, and sharpening skills in Blockchain, Web3, and AI-driven applications. I believe in learning by building.</p>
                    <div class="about-footer">ðŸš€ Always curious. Always building. Always improving.</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ======= PIXEL CANVAS ======= -->
    <canvas id="pixel-canvas"></canvas>

    <!-- ======= SECTOR TRANSITION ======= -->
    <canvas id="transition-canvas"></canvas>
    <div id="transition-backdrop"></div>
    <div id="sector-transition">
        <div class="sector-bg-num" id="tc-bg-num">02</div>
        <div class="sector-rule-line" id="tc-rule"></div>
        <div class="sector-card-tag" id="tc-tag">ENTERING</div>
        <div class="sector-card-label" id="tc-label">KEY<br>PROJECTS</div>
        <div class="sector-card-sub" id="tc-sub">SECTOR_02 // DATA CUBES</div>
    </div>
    <div id="sector-alert">â–¸ ENTERING SECTOR_02</div>

    <!-- ======= INTRO LOADER ======= -->
    <div id="loader-overlay">
        <div class="loader-corner tl"></div>
        <div class="loader-corner tr"></div>
        <div class="loader-corner bl"></div>
        <div class="loader-corner br"></div>
        <div id="loader-grid"></div>
        <div id="intro-name">JEEVAN<span class="n2">YADAV</span></div>
        <div id="intro-roles">
            <span class="role-chip">Blockchain Dev</span>
            <span class="role-chip">Web3 Architect</span>
            <span class="role-chip">Full Stack</span>
        </div>
        <div id="loader-log">
            <div class="log-line info" style="animation-delay:0.8s">Initializing render engine...</div>
            <div class="log-line ok"   style="animation-delay:1.4s">THREE.js r128 loaded</div>
            <div class="log-line ok"   style="animation-delay:1.9s">Starfield [40,000 pts] ready</div>
            <div class="log-line info" style="animation-delay:2.5s">Loading GLTF assets...</div>
            <div class="log-line ok"   style="animation-delay:3.0s">Robot model mounted</div>
            <div class="log-line warn" style="animation-delay:3.4s">Audio: awaiting gesture</div>
            <div class="log-line ok"   style="animation-delay:3.8s">All systems nominal</div>
        </div>
        <div id="intro-bar"><div id="intro-bar-fill"></div></div>
        <div id="intro-hint">[ click anywhere to launch ]</div>
    </div>

    <!-- ======= HUD LABELS ======= -->
    <div id="labels">
        <div id="lbl-head" class="hud-label">LOGIC_CORE [ACTIVE]</div>
        <div id="lbl-obj" class="hud-label"
            style="border-left:none; border-right:2px solid var(--cyan); padding-right:10px; padding-left:0; text-align:right; opacity:0;">
            <span id="obj-name">UNKNOWN</span><br>
            <span style="font-size:0.45rem; color:#667799; letter-spacing:2px;">ANALYZING</span>
        </div>
    </div>

    <div id="canvas-container"></div>

    <!-- ======= IGLOO-STYLE SECTIONS ======= -->
    <div class="content-layer" id="main-content">

        <!-- â•â•â• SECTOR 01: HERO â•â•â• -->
        <section id="sec-0">
            <div class="section-inner">

                <div class="sec-eyebrow reveal-item">
                    <span class="sec-eyebrow-line"></span>
                    SECTOR_01
                    <span class="sec-eyebrow-num">// 001</span>
                </div>

                <div class="hero-name-block">
                    <div class="hero-title reveal-item delay-1">
                        JEEVAN
                        <span class="line-2">YADAV</span>
                    </div>
                </div>

                <div class="hero-divider reveal-item delay-2">
                    <div class="hero-divider-line"></div>
                    <div class="hero-divider-dot"></div>
                </div>

                <div class="hero-role-row reveal-item delay-3">
                    <span class="hero-role-chip">Blockchain Dev</span>
                    <span class="hero-role-chip">Web3 Architect</span>
                    <span class="hero-role-chip">Full Stack</span>
                </div>

                <div class="hero-scroll-hint reveal-item delay-4">SCROLL TO EXPLORE</div>
            </div>
        </section>

        <!-- â•â•â• SECTOR 02: PROJECTS â•â•â• -->
        <section id="sec-1">
            <div class="section-inner">
                <div class="sec-eyebrow reveal-item">
                    <span class="sec-eyebrow-line"></span>
                    SECTOR_02
                    <span class="sec-eyebrow-num">// 002</span>
                </div>
                <h2 class="sec-heading reveal-item delay-1" data-text="KEY&#10;PROJECTS">KEY<br>PROJECTS</h2>
                <div class="sec-rule reveal-item delay-2"></div>
                <p class="sec-lead reveal-item delay-3">Hover the Data Cubes to scan mission files.</p>
                <div class="sec-stats-row reveal-item delay-4">
                    <div class="sec-stat"><span class="sec-stat-val">3</span><span class="sec-stat-label">LIVE MISSIONS</span></div>
                    <div class="sec-stat"><span class="sec-stat-val">ETH</span><span class="sec-stat-label">NETWORK</span></div>
                    <div class="sec-stat"><span class="sec-stat-val">WEB3</span><span class="sec-stat-label">STACK</span></div>
                </div>
            </div>
            <div class="sec-watermark reveal-item">02</div>
        </section>

        <!-- â•â•â• SECTOR 03: SKILLS â•â•â• -->
        <section id="sec-2">
            <div class="section-inner">
                <div class="sec-eyebrow reveal-item">
                    <span class="sec-eyebrow-line"></span>
                    SECTOR_03
                    <span class="sec-eyebrow-num">// 003</span>
                </div>
                <h2 class="sec-heading reveal-item delay-1" data-text="SKILLS &amp;&#10;STACK">SKILLS &amp;<br>STACK</h2>
                <div class="sec-rule reveal-item delay-2"></div>
                <p class="sec-lead reveal-item delay-3">Scan the Asteroid Field â€” each rock holds a technology.</p>
                <div class="sec-stats-row reveal-item delay-4">
                    <div class="sec-stat"><span class="sec-stat-val">5+</span><span class="sec-stat-label">CORE SKILLS</span></div>
                    <div class="sec-stat"><span class="sec-stat-val">90%</span><span class="sec-stat-label">SOLIDITY</span></div>
                    <div class="sec-stat"><span class="sec-stat-val">95%</span><span class="sec-stat-label">C++ / DSA</span></div>
                </div>
            </div>
            <div class="sec-watermark reveal-item">03</div>
        </section>

        <!-- â•â•â• SECTOR 04: EDUCATION â•â•â• -->
        <section id="sec-3">
            <div class="section-inner">
                <div class="sec-eyebrow reveal-item">
                    <span class="sec-eyebrow-line"></span>
                    SECTOR_04
                    <span class="sec-eyebrow-num">// 004</span>
                </div>
                <h2 class="sec-heading reveal-item delay-1" data-text="ACADEMIC&#10;LOGS">ACADEMIC<br>LOGS</h2>
                <div class="sec-rule reveal-item delay-2"></div>
                <p class="sec-lead reveal-item delay-3">Education &amp; Certifications â€” knowledge encoded in crystal.</p>
                <div class="sec-stats-row reveal-item delay-4">
                    <div class="sec-stat"><span class="sec-stat-val">2026</span><span class="sec-stat-label">GRADUATION</span></div>
                    <div class="sec-stat"><span class="sec-stat-val">CSE</span><span class="sec-stat-label">MAJOR</span></div>
                    <div class="sec-stat"><span class="sec-stat-val">B.E.</span><span class="sec-stat-label">DEGREE</span></div>
                </div>
            </div>
            <div class="sec-watermark reveal-item">04</div>
        </section>

        <!-- â•â•â• SECTOR 05: CONTACT â•â•â• -->
        <section id="sec-4">
            <div class="section-inner">
                <div class="sec-eyebrow reveal-item">
                    <span class="sec-eyebrow-line"></span>
                    SECTOR_05
                    <span class="sec-eyebrow-num">// 005</span>
                </div>
                <h2 class="sec-heading reveal-item delay-1" data-text="CONTACT&#10;UPLINK">CONTACT<br>UPLINK</h2>
                <div class="sec-rule reveal-item delay-2"></div>
                <p class="sec-lead reveal-item delay-3">Click the UFOs to open a direct channel.</p>
                <div class="sec-stats-row reveal-item delay-4">
                    <div class="sec-stat"><span class="sec-stat-val">3</span><span class="sec-stat-label">CHANNELS</span></div>
                    <div class="sec-stat"><span class="sec-stat-val">24H</span><span class="sec-stat-label">RESPONSE</span></div>
                </div>
            </div>
            <div class="sec-watermark reveal-item">05</div>
        </section>

        <!-- â•â•â• SECTOR END: WARP â•â•â• -->
        <section id="sec-5" style="grid-template-columns: 1fr;">
            <div class="section-inner" style="align-items: center; text-align: center;">
                <div class="sec-eyebrow reveal-item" style="justify-content:center; color:var(--orange);">
                    <span class="sec-eyebrow-line" style="background:var(--orange);"></span>
                    SYSTEM_END
                    <span class="sec-eyebrow-num" style="color:rgba(255,69,0,0.4);">// END</span>
                </div>
                <h2 class="sec-heading reveal-item delay-1"
                    style="color:var(--orange); -webkit-text-stroke:0;"
                    data-text="RE-INITIALIZE&#10;SEQUENCE">
                    RE-INITIALIZE<br>SEQUENCE
                </h2>
                <div class="sec-rule reveal-item delay-2" style="background:linear-gradient(90deg,transparent,var(--orange),transparent); margin:20px auto;"></div>
                <p class="sec-lead reveal-item delay-3" style="color:#554433; text-align:center; border:none; padding:0; margin:0 auto;">
                    Hover the ship &nbsp;Â·&nbsp; Click to warp back
                </p>
            </div>
        </section>

    </div>
    <!-- ======= ALL ORIGINAL JAVASCRIPT (UNCHANGED) + UI ADDITIONS ======= -->
    <script type="module">

        // --- DATA ---
        const projectsData = [
            { name: "PROJECT ALPHA", desc: "A revolutionary DeFi protocol built on Ethereum.", pos: {x: -5, y: 1, z: -20} },
            { name: "PROJECT BETA", desc: "Next-gen NFT marketplace with zero gas fees.", pos: {x: 5, y: -1, z: -20} },
            { name: "PROJECT GAMMA", desc: "AI-driven DAO governance voting system.", pos: {x: 0, y: 3, z: -20} }
        ];

        const skillsData = [
            { name: "SOLIDITY", pos: { x: -8, y: 3, z: -40 }, desc: "Expertise in writing secure smart contracts.", level: "MASTERY: 90%" },
            { name: "THREE.JS", pos: { x: 8, y: 4, z: -40 }, desc: "Creating immersive 3D web experiences.", level: "MASTERY: 85%" },
            { name: "C++ / DSA", pos: { x: -6, y: -4, z: -40 }, desc: "Algorithms & Logic.", level: "MASTERY: 95%" },
            { name: "REACT", pos: { x: 6, y: -3, z: -40 }, desc: "Frontend Architecture.", level: "MASTERY: 92%" },
            { name: "SYS ARCH", pos: { x: 0, y: 0, z: -40 }, desc: "System Design.", level: "MASTERY: 88%" }
        ];

        const eduData = [
            { name: "BACHELOR DEGREE", desc: "2022-2026 | Computer Science Engineering", pos: {x: -4, y: 1, z: -60} },
            { name: "MASTER CERT", desc: "2024 | Advanced Blockchain Security", pos: {x: 4, y: -1, z: -60} }
        ];

        const contactData = [
            { id: "linkedin", label: "in", url: "https://linkedin.com", pos: { x: -6, y: 2, z: -80 } },
            { id: "gmail", label: "M", url: "mailto:jeevanyadav9898@gmail.com", pos: { x: 0, y: 3, z: -80 } },
            { id: "github", label: "Git", url: "https://github.com", pos: { x: 6, y: 2, z: -80 } }
        ];

        // --- SETUP ---
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x050505, 0.015);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        camera.position.z = 5;
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // --- GROUPS ---
        const projectGroup = new THREE.Group(); scene.add(projectGroup);
        const asteroidGroup = new THREE.Group(); scene.add(asteroidGroup);
        const eduGroup = new THREE.Group(); scene.add(eduGroup);
        const ufoGroup = new THREE.Group(); scene.add(ufoGroup);
        const warpGroup = new THREE.Group(); scene.add(warpGroup);
        
        // --- LIGHTS ---
        const dirLight = new THREE.DirectionalLight(0xffffff, 1); dirLight.position.set(5, 5, 5); scene.add(dirLight);
        const blueLight = new THREE.PointLight(0x00f2ff, 2, 50); blueLight.position.set(-5, 0, 5); scene.add(blueLight);
        const ambient = new THREE.AmbientLight(0x222222); scene.add(ambient);

        // --- ASSETS ---
        const manager = new THREE.LoadingManager();
        const gltfLoader = new THREE.GLTFLoader(manager);
        const fontLoader = new THREE.FontLoader(manager);

        // --- PROCEDURAL SPACESHIP ---
        const playerShip = new THREE.Group();
        scene.add(playerShip);
        
        const hullMat = new THREE.MeshStandardMaterial({ 
            color: 0xffffff, metalness: 0.6, roughness: 0.4, emissive: 0x222222
        });
        const hull = new THREE.Mesh(new THREE.CylinderGeometry(0.3, 0.6, 4, 8), hullMat);
        hull.rotation.x = Math.PI / 2; hull.position.z = 0.5;
        playerShip.add(hull);

        const cockMat = new THREE.MeshBasicMaterial({ color: 0x00f2ff });
        const cockpit = new THREE.Mesh(new THREE.BoxGeometry(0.5, 0.4, 1.2), cockMat);
        cockpit.position.y = 0.35; cockpit.position.z = -0.2;
        playerShip.add(cockpit);

        const wingL = new THREE.Mesh(new THREE.BoxGeometry(2.5, 0.1, 2), hullMat); wingL.position.set(-1.2, 0, 1.5);
        const wingR = new THREE.Mesh(new THREE.BoxGeometry(2.5, 0.1, 2), hullMat); wingR.position.set(1.2, 0, 1.5);
        playerShip.add(wingL); playerShip.add(wingR);

        const engineMat = new THREE.MeshStandardMaterial({ color: 0x444444 });
        const glowMat = new THREE.MeshBasicMaterial({ color: 0x00f2ff });
        const engGeo = new THREE.CylinderGeometry(0.35, 0.5, 1.5, 16);
        const engL = new THREE.Mesh(engGeo, engineMat); engL.rotation.x = Math.PI/2; engL.position.set(-1.5, 0, 1.5);
        const engR = new THREE.Mesh(engGeo, engineMat); engR.rotation.x = Math.PI/2; engR.position.set(1.5, 0, 1.5);
        const gL = new THREE.Mesh(new THREE.CircleGeometry(0.3, 16), glowMat); gL.position.y = -0.76; gL.rotation.x = Math.PI/2; engL.add(gL);
        const gR = new THREE.Mesh(new THREE.CircleGeometry(0.3, 16), glowMat); gR.position.y = -0.76; gR.rotation.x = Math.PI/2; engR.add(gR);
        playerShip.add(engL); playerShip.add(engR);

        const shipLight = new THREE.PointLight(0xffffff, 2, 20);
        shipLight.position.set(0, 3, 0);
        playerShip.add(shipLight);

        playerShip.scale.set(1.2, 1.2, 1.2); 
        playerShip.position.set(0, -1, 3);

        // --- WARP LINES ---
        const warpCount = 600;
        const warpGeo = new THREE.BufferGeometry();
        const warpPositions = new Float32Array(warpCount * 6);
        for(let i=0; i<warpCount; i++) {
            let x = (Math.random() - 0.5) * 150; let y = (Math.random() - 0.5) * 150; let z = (Math.random() - 0.5) * 150;
            let idx = i * 6;
            warpPositions[idx] = x; warpPositions[idx+1] = y; warpPositions[idx+2] = z;
            warpPositions[idx+3] = x; warpPositions[idx+4] = y; warpPositions[idx+5] = z - 30; 
        }
        warpGeo.setAttribute('position', new THREE.BufferAttribute(warpPositions, 3));
        const warpMat = new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0 });
        const warpLines = new THREE.LineSegments(warpGeo, warpMat);
        warpGroup.add(warpLines);

        // ROBOT
        let robot, head, mixer, eyesMat;
        gltfLoader.load('https://threejs.org/examples/models/gltf/RobotExpressive/RobotExpressive.glb', (gltf) => {
            robot = gltf.scene;
            robot.scale.set(0.8, 0.8, 0.8);
            robot.position.set(3, -2, -2);
            robot.visible = false;
            scene.add(robot);
            mixer = new THREE.AnimationMixer(robot);
            const idle = gltf.animations.find(a => a.name === 'Idle');
            if(idle) mixer.clipAction(idle).play();
            robot.traverse(o => { 
                if(o.isMesh && o.name.includes('Eye')) { o.material = new THREE.MeshBasicMaterial({ color: 0x00f2ff }); eyesMat = o.material; }
                if(o.isBone && o.name === 'Head') head = o; 
            });
        });

        // RINGS
        const rings = [];
        const ringGeo = new THREE.TorusGeometry(8, 0.05, 16, 100);
        const ringMat = new THREE.MeshBasicMaterial({ color: 0x00f2ff, transparent: true, opacity: 0.3 });
        const ringPositions = [0, -20, -40, -60, -80]; 
        ringPositions.forEach(zPos => {
            const r = new THREE.Mesh(ringGeo, ringMat);
            r.position.z = zPos;
            scene.add(r);
            rings.push(r);
        });

        // STARS
        const starsGeo = new THREE.BufferGeometry();
        const starsCount = 40000;
        const posArray = new Float32Array(starsCount * 3);
        for(let i=0; i<starsCount*3; i++) posArray[i] = (Math.random()-0.5)*300;
        starsGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const starField = new THREE.Points(starsGeo, new THREE.PointsMaterial({size:0.05, color:0xffffff, transparent:true, opacity:0.8}));
        scene.add(starField);

        // DUST
        const dustGeo = new THREE.BufferGeometry();
        const dustPos = new Float32Array(10000);
        for(let i=0; i<10000; i++) dustPos[i] = (Math.random()-0.5)*50;
        dustGeo.setAttribute('position', new THREE.BufferAttribute(dustPos, 3));
        const dustSystem = new THREE.Points(dustGeo, new THREE.PointsMaterial({size:0.02, color:0x00f2ff, opacity:0.4, transparent:true}));
        scene.add(dustSystem);

        // FONTS
        fontLoader.load('https://threejs.org/examples/fonts/droid/droid_sans_regular.typeface.json', (font) => {
            const whiteMat = new THREE.MeshBasicMaterial({color: 0xffffff});
            
            const createName = (str, y) => {
                let x = -6.5;
                for(let char of str) {
                    const g = new THREE.TextGeometry(char, {font:font, size:0.8, height:0.1});
                    g.computeBoundingBox();
                    const w = g.boundingBox.max.x - g.boundingBox.min.x;
                    const m = new THREE.Mesh(g, whiteMat);
                    m.position.set(x, y, -2); scene.add(m); x += w + 0.1;
                }
            };
            createName("JEEVAN", 1.2); createName("YADAV", 0);

            const boxGeo = new THREE.BoxGeometry(2, 2, 2);
            const boxMat = new THREE.MeshBasicMaterial({color: 0x00f2ff, wireframe:true});
            projectsData.forEach((p, i) => {
                const m = new THREE.Mesh(boxGeo, boxMat);
                m.position.set(p.pos.x, p.pos.y, p.pos.z);
                m.userData = { type: 'project', data: p, originalY: p.pos.y, offset: i };
                projectGroup.add(m);
            });

            const astGeo = new THREE.IcosahedronGeometry(1, 1);
            const astMat = new THREE.MeshStandardMaterial({color:0x222222, roughness:0.8, flatShading:true});
            const astWire = new THREE.MeshBasicMaterial({color:0x00f2ff, wireframe:true, transparent:true, opacity:0.1});
            skillsData.forEach(s => {
                const grp = new THREE.Group();
                grp.add(new THREE.Mesh(astGeo, astMat));
                grp.add(new THREE.Mesh(astGeo, astWire));
                grp.children[1].scale.set(1.1,1.1,1.1);
                grp.position.set(s.pos.x, s.pos.y, s.pos.z);
                grp.userData = { type: 'skill', data: s, name: s.name };
                asteroidGroup.add(grp);
            });

            const pyrGeo = new THREE.TetrahedronGeometry(1.5);
            const pyrMat = new THREE.MeshBasicMaterial({color: 0xffd700, wireframe:true});
            eduData.forEach((e, i) => {
                const m = new THREE.Mesh(pyrGeo, pyrMat);
                m.position.set(e.pos.x, e.pos.y, e.pos.z);
                m.userData = { type: 'edu', data: e, originalY: e.pos.y, offset: i };
                eduGroup.add(m);
            });

            const ufoBodyMat = new THREE.MeshStandardMaterial({ color: 0x111111, metalness: 0.8, roughness: 0.2 });
            const ufoCockpitMat = new THREE.MeshBasicMaterial({ color: 0x00f2ff });
            const rockMat = new THREE.MeshStandardMaterial({color:0x444444, roughness:1, flatShading:true});
            
            contactData.forEach(c => {
                const ufoUnit = new THREE.Group();
                const ufoMesh = new THREE.Group(); 
                const body = new THREE.Mesh(new THREE.SphereGeometry(1.5, 32, 16), ufoBodyMat);
                body.scale.set(1, 0.3, 1);
                const cockpit = new THREE.Mesh(new THREE.SphereGeometry(0.7, 32, 16), ufoCockpitMat);
                cockpit.position.y = 0.3;
                ufoMesh.add(body); ufoMesh.add(cockpit);
                ufoMesh.position.y = 4;
                const beam = new THREE.Mesh(new THREE.CylinderGeometry(0.1,2,8,32,1,true), new THREE.MeshBasicMaterial({color:0x00f2ff, transparent:true, opacity:0.1, side:THREE.DoubleSide, blending:THREE.AdditiveBlending}));
                const tGeo = new THREE.TextGeometry(c.label, {font:font, size:1.5, height:0.5, bevelEnabled:true, bevelThickness:0.1, bevelSize:0.05});
                const pos = tGeo.attributes.position;
                for(let i=0; i<pos.count; i++) pos.setXYZ(i, pos.getX(i)+(Math.random()-0.5)*0.2, pos.getY(i)+(Math.random()-0.5)*0.2, pos.getZ(i)+(Math.random()-0.5)*0.2);
                tGeo.computeVertexNormals(); tGeo.computeBoundingBox();
                const center = -0.5*(tGeo.boundingBox.max.x - tGeo.boundingBox.min.x);
                const txt = new THREE.Mesh(tGeo, rockMat);
                txt.position.set(center, -4, 0); txt.rotation.x = -Math.PI/6;
                ufoUnit.add(ufoMesh); ufoUnit.add(beam); ufoUnit.add(txt);
                ufoUnit.position.set(c.pos.x, c.pos.y, c.pos.z);
                ufoUnit.userData = { type: 'ufo', url: c.url };
                ufoGroup.add(ufoUnit);
            });
        });

        // --- LOGIC ---
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        const clock = new THREE.Clock();
        
        let hoveredObj = null;
        let isHoveredRobot = false;
        let isHoveredEndShip = false;
        let currentScroll = 0;
        let targetScroll = 0;
        let isLaunched = false;
        let isLoopReady = false;

        // ABOUT MODAL
        const aboutModal = document.getElementById('about-modal');
        let aboutOpen = false;
        function showAbout() { if(aboutOpen) return; aboutOpen = true; aboutModal.classList.add('active'); }
        function hideAbout() { if(!aboutOpen) return; aboutOpen = false; aboutModal.classList.remove('active'); }

        // SECTOR NAMES for HUD
        const sectorNames = [
            'SECTOR_01 // INTRODUCTION',
            'SECTOR_02 // KEY PROJECTS',
            'SECTOR_03 // SKILLS & STACK',
            'SECTOR_04 // ACADEMIC LOGS',
            'SECTOR_05 // CONTACT UPLINK',
            'SECTOR_END // WARP POINT'
        ];

        // ---- SECTOR TRANSITION: GAS CLOUDS + METEOROIDS ----

        const sectorBoundaries = window._sectorBoundaries = [
            { pct: 0.15, label: 'KEY\nPROJECTS',   sub: 'SECTOR_02 // DATA CUBES',     tag: 'ENTERING', palette: 'cyan'   },
            { pct: 0.35, label: 'SKILLS\n& STACK',  sub: 'SECTOR_03 // ASTEROID FIELD', tag: 'ENTERING', palette: 'green'  },
            { pct: 0.55, label: 'ACADEMIC\nLOGS',   sub: 'SECTOR_04 // CRYSTAL LOGS',   tag: 'ENTERING', palette: 'gold'   },
            { pct: 0.75, label: 'CONTACT\nUPLINK',  sub: 'SECTOR_05 // UFO CHANNEL',    tag: 'ENTERING', palette: 'violet' },
            { pct: 0.95, label: 'WARP\nPOINT',      sub: 'SYSTEM_END // RE-INITIALIZE', tag: 'WARNING',  palette: 'fire'   },
        ];

        // Color palettes per sector [gasColors, meteorTint, glowColor]
        const PALETTES = {
            cyan:   { gas: [[0,220,255],[0,180,220],[40,255,255],[0,100,180]],   rock: [120,160,180], glow: [0,220,255]   },
            green:  { gas: [[0,255,160],[0,200,120],[80,255,180],[0,160,80]],    rock: [80,160,120],  glow: [0,255,160]   },
            gold:   { gas: [[255,200,40],[255,160,0],[255,230,100],[200,140,0]], rock: [180,140,60],  glow: [255,200,40]  },
            violet: { gas: [[180,80,255],[220,60,200],[140,40,255],[100,0,200]], rock: [120,60,160],  glow: [180,80,255]  },
            fire:   { gas: [[255,80,0],[255,40,0],[255,160,0],[200,0,0]],        rock: [160,60,30],   glow: [255,80,0]    },
        };

        const txCanvas = document.getElementById('transition-canvas');
        const txCtx    = txCanvas.getContext('2d');
        let txW, txH;

        function resizeTxCanvas() {
            txW = txCanvas.width  = window.innerWidth;
            txH = txCanvas.height = window.innerHeight;
        }
        resizeTxCanvas();
        window.addEventListener('resize', resizeTxCanvas);

        // ---------- GAS CLOUD CLASS ----------
        class GasCloud {
            constructor(pal) {
                const col = pal.gas[Math.floor(Math.random() * pal.gas.length)];
                this.r   = col[0];
                this.g   = col[1];
                this.b   = col[2];
                // Spawn across full screen with bias toward center swirl
                this.x   = txW * (0.1 + Math.random() * 0.8);
                this.y   = txH * (0.05 + Math.random() * 0.9);
                this.rad = 100 + Math.random() * 260;
                this.vx  = (Math.random() - 0.5) * 1.2;
                this.vy  = (Math.random() - 0.5) * 1.2;
                this.life    = 0;          // 0â†’1
                this.speed   = 0.006 + Math.random() * 0.006;
                this.maxAlph = 0.045 + Math.random() * 0.07;
                // Slight elliptical warp
                this.scaleX  = 0.6 + Math.random() * 0.8;
                this.scaleY  = 0.6 + Math.random() * 0.8;
                this.rotation = Math.random() * Math.PI * 2;
                this.rotSpeed = (Math.random() - 0.5) * 0.008;
            }
            update() {
                this.life += this.speed;
                this.x += this.vx; this.y += this.vy;
                this.rotation += this.rotSpeed;
            }
            get alpha() { return this.maxAlph * Math.sin(Math.min(this.life, 1) * Math.PI); }
            get dead()  { return this.life >= 1; }
            draw(ctx) {
                const a = this.alpha;
                if (a <= 0) return;
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);
                ctx.scale(this.scaleX, this.scaleY);
                const grad = ctx.createRadialGradient(0, 0, 0, 0, 0, this.rad);
                grad.addColorStop(0,   `rgba(${this.r},${this.g},${this.b},${(a * 1.8).toFixed(3)})`);
                grad.addColorStop(0.4, `rgba(${this.r},${this.g},${this.b},${(a * 0.6).toFixed(3)})`);
                grad.addColorStop(1,   `rgba(${this.r},${this.g},${this.b},0)`);
                ctx.fillStyle = grad;
                ctx.beginPath();
                ctx.arc(0, 0, this.rad, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }

        // ---------- METEOROID CLASS ----------
        class Meteoroid {
            constructor(pal) {
                // Random spawn from left or right edge
                this.fromLeft = Math.random() > 0.5;
                this.y     = txH * (0.05 + Math.random() * 0.9);
                this.x     = this.fromLeft ? -120 : txW + 120;
                // Speed: fast enough to cross screen in ~1-1.5s
                const spd  = 9 + Math.random() * 14;
                this.vx    = this.fromLeft ? spd : -spd;
                this.vy    = (Math.random() - 0.5) * 4;
                this.rot   = Math.random() * Math.PI * 2;
                this.rotSpd = (Math.random() - 0.5) * 0.18;
                this.size  = 6 + Math.random() * 22;
                this.verts = this._makeShape();
                this.trail = [];
                this.maxTrail = 18;
                // Rock color from palette
                const [rr,rg,rb] = pal.rock;
                const lum = 0.7 + Math.random() * 0.5;
                this.fillColor   = `rgb(${Math.round(rr*lum)},${Math.round(rg*lum)},${Math.round(rb*lum)})`;
                this.strokeColor = `rgba(${pal.glow[0]},${pal.glow[1]},${pal.glow[2]},0.5)`;
                this.glowColor   = `rgba(${pal.glow[0]},${pal.glow[1]},${pal.glow[2]},0.15)`;
                this.alpha = 1;
            }
            _makeShape() {
                const sides = 5 + Math.floor(Math.random() * 5);
                return Array.from({length: sides}, (_, i) => {
                    const angle = (i / sides) * Math.PI * 2 + (Math.random() - 0.5) * 0.6;
                    const r = this.size * (0.55 + Math.random() * 0.65);
                    return [Math.cos(angle) * r, Math.sin(angle) * r];
                });
            }
            update() {
                this.trail.push({x: this.x, y: this.y, a: this.alpha});
                if (this.trail.length > this.maxTrail) this.trail.shift();
                this.x   += this.vx;
                this.y   += this.vy;
                this.rot += this.rotSpd;
                // Fade when near edges
                const margin = 80;
                if (!this.fromLeft && this.x < margin) this.alpha = Math.max(0, this.x / margin);
                if (this.fromLeft  && this.x > txW - margin) this.alpha = Math.max(0, (txW - this.x) / margin);
            }
            get dead() {
                return this.fromLeft ? this.x > txW + 200 : this.x < -200;
            }
            draw(ctx) {
                if (this.alpha <= 0) return;
                // Glowing trail
                for (let i = 1; i < this.trail.length; i++) {
                    const t  = i / this.trail.length;
                    const t0 = this.trail[i-1], t1 = this.trail[i];
                    ctx.beginPath();
                    ctx.moveTo(t0.x, t0.y);
                    ctx.lineTo(t1.x, t1.y);
                    ctx.strokeStyle = this.glowColor.replace('0.15', (t * 0.25 * this.alpha).toFixed(3));
                    ctx.lineWidth   = t * this.size * 0.7;
                    ctx.lineCap     = 'round';
                    ctx.stroke();
                }
                // Sharp inner trail
                for (let i = Math.floor(this.trail.length * 0.6); i < this.trail.length - 1; i++) {
                    const t  = (i - this.trail.length * 0.6) / (this.trail.length * 0.4);
                    const t0 = this.trail[i], t1 = this.trail[i+1];
                    ctx.beginPath();
                    ctx.moveTo(t0.x, t0.y);
                    ctx.lineTo(t1.x, t1.y);
                    ctx.strokeStyle = `rgba(255,255,255,${(t * 0.4 * this.alpha).toFixed(3)})`;
                    ctx.lineWidth   = t * 2;
                    ctx.stroke();
                }
                // Rock body
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rot);
                ctx.beginPath();
                this.verts.forEach(([vx, vy], i) => i === 0 ? ctx.moveTo(vx, vy) : ctx.lineTo(vx, vy));
                ctx.closePath();
                ctx.fillStyle   = this.fillColor;
                ctx.strokeStyle = this.strokeColor;
                ctx.lineWidth   = 1.5;
                ctx.fill();
                ctx.stroke();
                // Rim highlight
                ctx.beginPath();
                this.verts.slice(0, Math.ceil(this.verts.length / 2)).forEach(([vx, vy], i) =>
                    i === 0 ? ctx.moveTo(vx * 0.7, vy * 0.7) : ctx.lineTo(vx * 0.7, vy * 0.7)
                );
                ctx.strokeStyle = `rgba(255,255,255,0.15)`;
                ctx.lineWidth = 1;
                ctx.stroke();
                ctx.restore();
            }
        }

        // ---------- ANIMATION STATE ----------
        let txGas     = [];
        let txRocks   = [];
        let txRunning = false;
        let txRafId   = null;
        let txPal     = PALETTES.cyan;
        let txEndTime = 0;

        function txSpawnBurst(pal) {
            txPal = pal;
            // Stagger gas cloud creation
            const gasCount = 18 + Math.floor(Math.random() * 10);
            for (let i = 0; i < gasCount; i++) {
                setTimeout(() => txGas.push(new GasCloud(pal)), i * 40);
            }
            // Stagger meteoroid creation across the full duration
            const rockCount = 12 + Math.floor(Math.random() * 8);
            for (let i = 0; i < rockCount; i++) {
                setTimeout(() => txRocks.push(new Meteoroid(pal)), i * 100 + Math.random() * 80);
            }
        }

        function txTick(now) {
            txCtx.clearRect(0, 0, txW, txH);

            // Additive blending for glow gases
            txCtx.globalCompositeOperation = 'screen';
            txGas = txGas.filter(g => { g.update(); g.draw(txCtx); return !g.dead; });

            // Normal blending for rocks
            txCtx.globalCompositeOperation = 'source-over';
            txRocks = txRocks.filter(r => { r.update(); r.draw(txCtx); return !r.dead; });

            const stillRunning = now < txEndTime || txGas.length > 0 || txRocks.length > 0;
            if (stillRunning) {
                txRafId = requestAnimationFrame(txTick);
            } else {
                txCtx.clearRect(0, 0, txW, txH);
                txCanvas.classList.remove('active');
                txRunning = false;
            }
        }

        // ---------- TRANSITION COLOURS ON CARD ----------
        const CARD_COLORS = {
            cyan:   { label: '#fff', sub: '#00f2ff',  tag: 'rgba(0,242,255,0.7)',  alertBorder: '#00f2ff',  alertText: '#00f2ff'  },
            green:  { label: '#fff', sub: '#00ffaa',  tag: 'rgba(0,255,170,0.7)',  alertBorder: '#00ffaa',  alertText: '#00ffaa'  },
            gold:   { label: '#fff', sub: '#ffc820',  tag: 'rgba(255,200,32,0.7)', alertBorder: '#ffc820',  alertText: '#ffc820'  },
            violet: { label: '#fff', sub: '#c060ff',  tag: 'rgba(180,80,255,0.7)', alertBorder: '#c060ff',  alertText: '#c060ff'  },
            fire:   { label: '#ff4500', sub: '#ff6020', tag: 'rgba(255,80,0,0.7)', alertBorder: '#ff4500',  alertText: '#ff4500'  },
        };

        // ---------- MAIN FIRE FUNCTION ----------
        let transitionCooldown = false;
        const backdrop = document.getElementById('transition-backdrop');
        const SECTOR_NUMS = ['02','03','04','05','END'];

        function fireSectorTransition(boundary) {
            if (transitionCooldown) return;
            transitionCooldown = true;

            const pal    = PALETTES[boundary.palette] || PALETTES.cyan;
            const colors = CARD_COLORS[boundary.palette] || CARD_COLORS.cyan;
            const glow   = pal.glow.join(',');
            const txEl   = document.getElementById('sector-transition');
            const alEl   = document.getElementById('sector-alert');
            const tcLbl  = document.getElementById('tc-label');
            const tcSub  = document.getElementById('tc-sub');
            const tcTag  = document.getElementById('tc-tag');
            const tcNum  = document.getElementById('tc-bg-num');
            const tcRule = document.getElementById('tc-rule');

            const bIdx   = sectorBoundaries.indexOf(boundary);
            tcNum.textContent  = SECTOR_NUMS[bIdx] || '0' + (bIdx + 2);
            tcNum.style.webkitTextStroke = `1px rgba(${glow},0.11)`;
            tcRule.style.background = `linear-gradient(90deg,rgba(${glow},0.8),transparent)`;
            tcLbl.innerHTML   = boundary.label.replace('\n','<br>');
            tcLbl.style.color = colors.label;
            tcLbl.style.textShadow = `0 0 60px rgba(${glow},0.4),0 0 100px rgba(${glow},0.15)`;
            tcSub.textContent = boundary.sub;
            tcSub.style.color = colors.sub;
            tcTag.textContent = boundary.tag;
            tcTag.style.color = colors.tag;
            alEl.textContent  = 'â–¸ ' + boundary.sub;
            alEl.style.color  = colors.sub;
            alEl.style.borderLeftColor = colors.sub;

            // Show backdrop
            backdrop.classList.remove('hide');
            requestAnimationFrame(() => backdrop.classList.add('show'));

            // Start gas+meteoroid canvas
            if (txRafId) cancelAnimationFrame(txRafId);
            txGas = []; txRocks = [];
            txCanvas.classList.add('active');
            txEndTime = performance.now() + 2400;
            txSpawnBurst(pal);
            txRunning = true;
            txRafId = requestAnimationFrame(txTick);

            // Reveal card after 130ms
            txEl.classList.remove('fire','fadeout');
            requestAnimationFrame(() => requestAnimationFrame(() => {
                setTimeout(() => txEl.classList.add('fire'), 130);
                alEl.classList.remove('show');
                void alEl.offsetWidth;
                alEl.classList.add('show');
            }));

            // Fade card at 1.3s
            setTimeout(() => txEl.classList.add('fadeout'), 1300);

            // Full cleanup at 2.8s
            setTimeout(() => {
                txEl.classList.remove('fire','fadeout');
                alEl.classList.remove('show');
                backdrop.classList.remove('show');
                backdrop.classList.add('hide');
                setTimeout(() => backdrop.classList.remove('hide'), 900);
                transitionCooldown = false;
            }, 2800);
        }

        // ---- END SECTOR TRANSITION ENGINE ----

        let lastSectorPct = -1;

        function getSectorIndex(p) {
            if (p < 0.15) return 0;
            if (p < 0.35) return 1;
            if (p < 0.55) return 2;
            if (p < 0.75) return 3;
            if (p < 0.95) return 4;
            return 5;
        }

        function handleInput(x, y) {
            mouse.x = (x / window.innerWidth) * 2 - 1;
            mouse.y = -(y / window.innerHeight) * 2 + 1;
            const hud = document.getElementById('cursor-hud');
            gsap.to(hud, {left: x, top: y, duration: 0.08});
            document.getElementById('cursor-xy').innerText = `X: ${String(x).padStart(4,'0')} | Y: ${String(y).padStart(4,'0')}`;
        }
        window.addEventListener('mousemove', (e) => handleInput(e.clientX, e.clientY));
        window.addEventListener('scroll', () => {
            if(isLaunched) {
                targetScroll = window.scrollY;
                const maxScroll = document.body.scrollHeight - window.innerHeight;
                if (maxScroll <= 0) return;

                const pct = (window.scrollY / maxScroll) * 100;
                const normPct = pct / 100;

                // Progress bar + depth
                document.getElementById('scroll-fill').style.height = pct + '%';
                document.getElementById('scroll-pct-display').textContent = Math.round(pct) + '%';
                document.getElementById('tb-depth').textContent = pct.toFixed(2);

                // 6 sectors = 6 equal scroll bands
                const totalSectors = 6;
                const sectorIdx = Math.min(Math.floor(normPct * totalSectors), totalSectors - 1);
                document.getElementById('sector-name-display').textContent = 'â–¸ ' + sectorNames[sectorIdx];
                document.getElementById('tb-sector-val').textContent = String(sectorIdx + 1).padStart(2, '0');
                document.querySelectorAll('.nav-item').forEach((n, i) => {
                    n.classList.toggle('active', i === sectorIdx);
                });

                // â”€â”€ BOUNDARY CROSSING â”€â”€
                const newSector = getSectorIndex(normPct);
                if (newSector !== lastSectorPct && lastSectorPct !== -1 && newSector > lastSectorPct) {
                    const crossed = sectorBoundaries.find(b =>
                        normPct >= b.pct - 0.03 && normPct <= b.pct + 0.15
                    ) || sectorBoundaries[Math.max(0, newSector - 1)];
                    if (crossed) fireSectorTransition(crossed);
                }
                lastSectorPct = newSector;
            }
        });

        // NAV CLICK
        window.navTo = (sectorIdx) => {
            const maxScroll = document.body.scrollHeight - window.innerHeight;
            const targetPct = sectorIdx / (sectorNames.length - 1);
            window.scrollTo({ top: targetPct * maxScroll, behavior: 'smooth' });
        };

        // --- AUDIO ---
        let audioCtx, masterGain;
        let isSoundOn = false;
        const soundBtn = document.getElementById('sound-toggle');

        function initAudio() {
            if(audioCtx) return;
            const AC = window.AudioContext || window.webkitAudioContext;
            audioCtx = new AC();
            masterGain = audioCtx.createGain();
            masterGain.connect(audioCtx.destination);
            masterGain.gain.value = 0;
            const osc = audioCtx.createOscillator();
            osc.frequency.value = 55;
            osc.connect(masterGain);
            osc.start();
        }

        function toggleSound() {
            if(!audioCtx) initAudio();
            if(audioCtx.state === 'suspended') audioCtx.resume();
            if(!isSoundOn) {
                masterGain.gain.setTargetAtTime(0.3, audioCtx.currentTime, 1);
                soundBtn.classList.add('active');
                document.getElementById('sound-text').innerText = "SND: ON";
                isSoundOn = true;
            } else {
                masterGain.gain.setTargetAtTime(0, audioCtx.currentTime, 0.5);
                soundBtn.classList.remove('active');
                document.getElementById('sound-text').innerText = "SND: OFF";
                isSoundOn = false;
            }
        }
        soundBtn.addEventListener('click', (e) => { e.stopPropagation(); toggleSound(); });
        
        function playNoise() {
            if(!audioCtx || !isSoundOn) return;
            const b = audioCtx.createBuffer(1, 22050, 44100);
            const d = b.getChannelData(0);
            for(let i=0;i<22050;i++) d[i] = Math.random()*2-1;
            const s = audioCtx.createBufferSource(); s.buffer = b;
            const g = audioCtx.createGain(); g.gain.value = 0.1;
            s.connect(g); g.connect(audioCtx.destination); s.start();
        }

        // --- LOADER ANIMATION ---
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  PIXEL DISSOLVE INTRO  (igloo.inc style)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        const pxCanvas = document.getElementById('pixel-canvas');
        const pxCtx    = pxCanvas.getContext('2d');
        let pxW = pxCanvas.width  = window.innerWidth;
        let pxH = pxCanvas.height = window.innerHeight;
        window.addEventListener('resize', () => {
            pxW = pxCanvas.width  = window.innerWidth;
            pxH = pxCanvas.height = window.innerHeight;
        });

        // Pixel grid â€” PX size keeps total count manageable on all devices
        const PX   = Math.max(5, Math.round(Math.min(pxW, pxH) / 100));
        const COLS = Math.ceil(pxW / PX);
        const ROWS = Math.ceil(pxH / PX);
        const N    = COLS * ROWS;

        // Build pixel data arrays
        const px_x    = new Float32Array(N);
        const px_y    = new Float32Array(N);
        const px_rev  = new Float32Array(N);   // reveal time (s)
        const px_diss = new Float32Array(N);   // dissolve time (s, from dissolve start)
        const px_col  = new Array(N);

        const BASE_COLS = ['#0a141e','#0d1c2a','#0e1825','#162336','#06101a'];
        for (let r = 0; r < ROWS; r++) {
            for (let c = 0; c < COLS; c++) {
                const i  = r * COLS + c;
                const cx = c / COLS - 0.5;
                const cy = r / ROWS - 0.5;
                const d  = Math.sqrt(cx*cx + cy*cy);
                px_x[i]    = c * PX;
                px_y[i]    = r * PX;
                px_rev[i]  = 0.05 + Math.random() * 1.8;
                px_diss[i] = 0.3 + d * 2.2 + Math.random() * 0.5; // edges dissolve first
                const rnd  = Math.random();
                px_col[i]  = rnd < 0.015 ? '#00f2ff'
                           : rnd < 0.005 ? 'rgba(255,255,255,0.9)'
                           : BASE_COLS[Math.floor(Math.random() * BASE_COLS.length)];
            }
        }

        let pxPhase    = 'build';
        const pxT0     = performance.now();
        let pxDissT0   = 0;
        let pxRaf      = null;
        let launched   = false;

        const barFill  = document.getElementById('intro-bar-fill');
        const nameEl   = document.getElementById('intro-name');
        const rolesEl  = document.getElementById('intro-roles');
        const hintEl   = document.getElementById('intro-hint');

        function pxDraw(t, dissolving) {
            pxCtx.clearRect(0, 0, pxW, pxH);
            for (let i = 0; i < N; i++) {
                let a;
                if (!dissolving) {
                    const dt = t - px_rev[i];
                    if (dt <= 0) continue;
                    a = Math.min(1, dt * 4);
                } else {
                    const dt = t - px_diss[i];
                    if (dt >= 0.5) continue;
                    a = dt < 0 ? 1 : Math.max(0, 1 - dt * 2.2);
                }
                if (a < 0.03) continue;
                pxCtx.globalAlpha = a * (0.78 + Math.random() * 0.22); // flicker
                pxCtx.fillStyle = px_col[i];
                pxCtx.fillRect(px_x[i], px_y[i], PX - 1, PX - 1);
            }
            pxCtx.globalAlpha = 1;
        }

        function pxTick(now) {
            if (pxPhase === 'build') {
                const t = (now - pxT0) / 1000;
                pxDraw(t, false);
                barFill.style.width = Math.min(100, (t / 4.5) * 100) + '%';
                if (t > 1.2) nameEl.classList.add('show');
                if (t > 2.2) rolesEl.classList.add('show');
                if (t > 3.5) hintEl.classList.add('show');
                if (t > 7 && !launched) triggerLaunch(); // auto-launch safety
                pxRaf = requestAnimationFrame(pxTick);
            } else if (pxPhase === 'dissolve') {
                const t = (now - pxDissT0) / 1000;
                pxDraw(t, true);
                if (t > 2.4) {
                    pxCtx.clearRect(0, 0, pxW, pxH);
                    pxCanvas.style.display = 'none';
                    pxPhase = 'done';
                    return;
                }
                pxRaf = requestAnimationFrame(pxTick);
            }
        }

        pxRaf = requestAnimationFrame(pxTick);

        // â”€â”€ CLICK/TOUCH to launch â€” NO gate, works immediately â”€â”€
        document.getElementById('loader-overlay').addEventListener('click',      triggerLaunch);
        document.getElementById('loader-overlay').addEventListener('touchstart', triggerLaunch, { passive: true });

        function triggerLaunch() {
            if (launched) return;
            launched = true;
            pxDissT0 = performance.now();
            pxPhase  = 'dissolve';
            nameEl.style.transition  = 'opacity 0.5s ease';
            nameEl.style.opacity     = '0';
            rolesEl.style.transition = 'opacity 0.35s ease';
            rolesEl.style.opacity    = '0';
            hintEl.style.opacity     = '0';
            const ov = document.getElementById('loader-overlay');
            ov.style.pointerEvents = 'none';
            setTimeout(() => {
                ov.style.transition = 'opacity 0.9s ease';
                ov.style.opacity    = '0';
                setTimeout(() => ov.remove(), 1100);
            }, 300);
            launchSequence();
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  LAUNCH SEQUENCE
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        window.launchSequence = () => {
            if(isLaunched) return;
            isLaunched = true;
            initAudio();

            setTimeout(() => {
                document.getElementById('top-bar').classList.add('visible');
                document.getElementById('side-nav').classList.add('visible');
                document.getElementById('scroll-progress').classList.add('visible');
                document.getElementById('bottom-hud').classList.add('visible');
            }, 900);

            gsap.to(playerShip.rotation, { x: -Math.PI / 4, duration: 1, ease: "power2.inOut" });
            gsap.to(playerShip.position, { z: -300, y: 30, duration: 3, ease: "power3.in" });

            gsap.to(warpMat, { opacity: 1, duration: 1, onComplete: () => {
                gsap.to(warpMat, { opacity: 0, delay: 1, duration: 1 });
            }});

            const starSpeed = { val: 0 };
            gsap.to(starSpeed, { val: 15, duration: 2.5, ease: "power2.in", onUpdate: () => {
                starField.scale.z = 1 + starSpeed.val;
            }, onComplete: () => {
                playerShip.visible = false;
                document.getElementById('main-content').classList.add('visible');
                if(robot) robot.visible = true;
                lastSectorPct = 0;
                gsap.to(starField.scale, { z: 1, duration: 1 });
            }});
        };

        window.warpBack = () => {
            if(!isLoopReady) return;
            isLoopReady = false; 
            gsap.to(playerShip.rotation, { x: -Math.PI / 4, duration: 1, ease: "power2.inOut" });
            gsap.to(playerShip.position, { z: -300, y: 30, duration: 2, ease: "power2.in" });
            gsap.to(warpMat, { opacity: 1, duration: 0.5 }); 
            const starSpeed = { val: 0 };
            gsap.to(starSpeed, { val: 20, duration: 2, ease: "power2.in", onUpdate: () => {
                starField.scale.z = 1 + starSpeed.val;
            }, onComplete: () => {
                window.scrollTo(0, 0);
                targetScroll = 0; currentScroll = 0;
                lastSectorPct = 0;
                playerShip.visible = false;
                gsap.to(warpMat, { opacity: 0, duration: 1 }); 
                gsap.to(starField.scale, { z: 1, duration: 1 });
            }});
        };

        window.addEventListener('click', () => {
            const scrollPercent = window.scrollY / (document.body.scrollHeight - window.innerHeight);
            if(scrollPercent > 0.75 && scrollPercent < 0.95 && hoveredObj && hoveredObj.userData.type === 'ufo') {
                window.open(hoveredObj.userData.url, '_blank');
            }
            if(isLoopReady && isHoveredEndShip) warpBack();
        });

        window.closeBrief = () => {
            document.getElementById('skill-modal').classList.remove('active');
            if(hoveredObj && hoveredObj.userData.type === 'skill') {
                gsap.to(hoveredObj.children[1].scale, {x:1.1,y:1.1,z:1.1});
                gsap.to(hoveredObj.children[1].material, {opacity:0.1});
                gsap.to(hoveredObj.children[0].scale, {x:1, y:1, z:1});
                hoveredObj = null;
            }
        };

        function animate() {
            requestAnimationFrame(animate);
            const delta = clock.getDelta();
            const time = Date.now() * 0.001;
            if(mixer) mixer.update(delta);

            if(robot && head) {
                const targetX = THREE.MathUtils.clamp(mouse.y * 0.5, -0.5, 0.5); 
                const targetY = THREE.MathUtils.clamp(mouse.x * 0.5, -0.5, 0.5);
                head.rotation.y = THREE.MathUtils.lerp(head.rotation.y, targetY, 0.1);
                head.rotation.x = THREE.MathUtils.lerp(head.rotation.x, targetX, 0.1);
            }

            if(playerShip && (!isLaunched || isLoopReady)) {
                playerShip.position.y = (isLoopReady ? -2 : -1) + Math.sin(time * 2) * 0.1;
                playerShip.rotation.z = Math.sin(time) * 0.05;
                if(isLoopReady) playerShip.rotation.x = -Math.PI / 8;
            }

            if(warpLines && warpMat.opacity > 0) {
                warpLines.position.z += 4; 
                if(warpLines.position.z > 50) warpLines.position.z = 0;
            }

            if (isLaunched) {
                currentScroll += (targetScroll - currentScroll) * 0.08;
                const maxScroll = document.body.scrollHeight - window.innerHeight;
                const scrollPercent = maxScroll > 0 ? currentScroll / maxScroll : 0;
                const travelDist = scrollPercent * 100; 
                camera.position.z = 5 - travelDist;
                checkInteractions(scrollPercent);
            }

            if(projectGroup) {
                projectGroup.children.forEach(mesh => {
                    if (mesh.userData.originalY !== undefined) {
                        mesh.position.y = mesh.userData.originalY + Math.sin(time * 1.5 + mesh.userData.offset) * 0.3;
                        mesh.rotation.x += 0.002; mesh.rotation.y += 0.003;
                    }
                });
            }
            if(eduGroup) {
                eduGroup.children.forEach(mesh => {
                    if (mesh.userData.originalY !== undefined) {
                        mesh.position.y = mesh.userData.originalY + Math.cos(time * 1.5 + mesh.userData.offset) * 0.3;
                        mesh.rotation.x -= 0.002; mesh.rotation.z += 0.002;
                    }
                });
            }

            if(asteroidGroup) asteroidGroup.children.forEach(a => { if(a !== hoveredObj) { a.rotation.x += 0.002; a.rotation.y += 0.003; } });
            if(ufoGroup) ufoGroup.children.forEach((u, i) => { u.children[0].position.y = 4 + Math.sin(time + i)*0.5; u.children[0].rotation.y += 0.01; });
            rings.forEach((r, i) => r.rotation.z += 0.002 * (i+1));

            if(hoveredObj && hoveredObj.userData.name) updateLabel(hoveredObj, 'lbl-obj', 60, -60);
            if(robot && robot.visible && isHoveredRobot && head) updateLabel(head, 'lbl-head', 60, -50);
            
            if(isLoopReady && playerShip) {
                updateLabel(playerShip, 'lbl-head', 0, -80);
                document.getElementById('lbl-head').style.opacity = 1;
                document.getElementById('lbl-head').innerHTML = "WARP_DRIVE [READY]";
            }

            renderer.render(scene, camera);
        }

        function checkInteractions(p) {
            raycaster.setFromCamera(mouse, camera);
            let locked = false;

            if(robot) {
                if(p < 0.15) {
                    robot.visible = true;
                    robot.position.z = -2 - (p * 50); 
                    const hits = raycaster.intersectObject(robot, true);
                    if(hits.length > 0) {
                        locked = true;
                        isHoveredRobot = true;
                        document.getElementById('lbl-head').style.opacity = 1;
                        showAbout();
                    } else {
                        isHoveredRobot = false;
                        document.getElementById('lbl-head').style.opacity = 0;
                        hideAbout();
                    }
                } else {
                    robot.visible = false;
                    hideAbout();
                }
            }

            if(p > 0.15 && p < 0.35) {
                const hits = raycaster.intersectObjects(projectGroup.children);
                if(hits.length > 0) {
                    locked = true;
                    if(hoveredObj !== hits[0].object) {
                        hoveredObj = hits[0].object;
                        showBrief(hoveredObj.userData.data.name, "PROJECT", hoveredObj.userData.data.desc);
                        showLabel(hoveredObj.userData.data.name);
                    }
                } else if(hoveredObj && hoveredObj.userData.type === 'project') { hoveredObj=null; hideBrief(); hideLabel(); }
            }

            if(p > 0.35 && p < 0.55) {
                const hits = raycaster.intersectObjects(asteroidGroup.children, true);
                if(hits.length > 0) {
                    locked = true;
                    let target = hits[0].object.parent;
                    if(hoveredObj !== target) {
                        if(hoveredObj) window.closeBrief();
                        hoveredObj = target;
                        gsap.to(target.children[1].scale, {x:2.5,y:2.5,z:2.5});
                        gsap.to(target.children[1].material, {opacity:0.8});
                        gsap.to(target.children[0].scale, {x:0.5,y:0.5,z:0.5});
                        playNoise();
                        showBrief(target.userData.data.name, target.userData.data.level, target.userData.data.desc);
                        showLabel(target.userData.data.name);
                    }
                } else if(hoveredObj && hoveredObj.userData.type === 'skill') { window.closeBrief(); hideLabel(); }
            } else if(hoveredObj && hoveredObj.userData.type === 'skill') { window.closeBrief(); hideLabel(); }

            if(p > 0.55 && p < 0.75) {
                const hits = raycaster.intersectObjects(eduGroup.children);
                if(hits.length > 0) {
                    locked = true;
                    if(hoveredObj !== hits[0].object) {
                        hoveredObj = hits[0].object;
                        showBrief(hoveredObj.userData.data.name, "EDUCATION", hoveredObj.userData.data.desc);
                        showLabel(hoveredObj.userData.data.name);
                    }
                } else if(hoveredObj && hoveredObj.userData.type === 'edu') { hoveredObj=null; hideBrief(); hideLabel(); }
            }

            if(p > 0.75 && p < 0.95) {
                const hits = raycaster.intersectObjects(ufoGroup.children, true);
                if(hits.length > 0) {
                    locked = true;
                    let target = hits[0].object.parent;
                    if(hoveredObj !== target) {
                        if(hoveredObj) resetUFO(hoveredObj);
                        hoveredObj = target;
                        gsap.to(target.children[1].material, {opacity:0.6}); 
                        showLabel("UPLINK");
                    }
                } else if(hoveredObj && hoveredObj.userData.type === 'ufo') { resetUFO(hoveredObj); hoveredObj=null; hideLabel(); }
            }

            if(p > 0.95) {
                if(!isLoopReady) {
                    isLoopReady = true;
                    playerShip.visible = true;
                    playerShip.position.set(0, -2, camera.position.z - 8); 
                    playerShip.rotation.set(-Math.PI/8, 0, 0); 
                }
                const hits = raycaster.intersectObjects(playerShip.children, true);
                if(hits.length > 0) { locked = true; isHoveredEndShip = true; } 
                else isHoveredEndShip = false;
            } else if(isLoopReady && !isLaunched) {
                isLoopReady = false; playerShip.visible = false; document.getElementById('lbl-head').style.opacity=0;
            }

            const hud = document.getElementById('cursor-hud');
            if(locked) hud.classList.add('locked'); else hud.classList.remove('locked');
        }

        function resetUFO(grp) { gsap.to(grp.children[1].material, {opacity:0.1}); }
        function showBrief(t, s, d) {
            document.getElementById('modal-title').innerText = t;
            document.getElementById('modal-type-badge').innerText = s;
            document.getElementById('modal-subtitle').innerText = s;
            document.getElementById('modal-desc').innerText = d;
            document.getElementById('skill-modal').classList.add('active');
        }
        function hideBrief() { document.getElementById('skill-modal').classList.remove('active'); }
        function showLabel(name) { document.getElementById('lbl-obj').style.opacity=1; document.getElementById('obj-name').innerText=name; }
        function hideLabel() { document.getElementById('lbl-obj').style.opacity=0; }
        function updateLabel(mesh, id, ox, oy) {
            const v = new THREE.Vector3(); mesh.getWorldPosition(v); v.project(camera);
            const x = (v.x * .5 + .5) * window.innerWidth + ox;
            const y = (-(v.y * .5) + .5) * window.innerHeight + oy;
            const el = document.getElementById(id); if(el) { el.style.left = `${x}px`; el.style.top = `${y}px`; }
        }

        animate();
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // â”€â”€ IGLOO-STYLE SECTION REVEAL (IntersectionObserver) â”€â”€
        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('in-view');
                } else {
                    // Remove so it re-animates when re-entered
                    entry.target.classList.remove('in-view');
                }
            });
        }, {
            threshold: 0.25,   // Trigger when 25% of section is visible
            rootMargin: '0px'
        });

        document.querySelectorAll('section').forEach(sec => sectionObserver.observe(sec));

        // Auto-trigger hero on load
        const heroSection = document.getElementById('sec-0');
        if (heroSection) {
            setTimeout(() => heroSection.classList.add('in-view'), 400);
        }
        // â”€â”€ END SECTION REVEAL â”€â”€
    </script>
</body>
</html>
